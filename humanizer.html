<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZeroGPT AI Content Detector</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
        }
        /* Custom styling for the primary card */
        .detection-card {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }
        .detection-card:hover {
            transform: translateY(-2px);
        }
        /* Custom styling for the result gauge */
        .gauge {
            width: 150px;
            height: 75px;
            border-radius: 75px 75px 0 0;
            overflow: hidden;
            position: relative;
            background-color: #e5e7eb;
        }
        .gauge-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150%; 
            /* Gradient from Green (Human) to Red (AI) */
            background: linear-gradient(90deg, #10b981 0%, #f59e0b 50%, #ef4444 100%);
            transform-origin: bottom center;
            transition: transform 1s ease-out;
        }
        .gauge-pointer {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 2px;
            height: 75px;
            background-color: #1f2937;
            transform-origin: bottom center;
            transition: transform 1s ease-out;
            z-index: 10;
        }
        .gauge-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: #1f2937;
        }
    </style>
</head>
<body class="p-4 sm:p-8 min-h-screen flex items-center justify-center">

    <div class="w-full max-w-4xl">
        <h1 class="text-4xl font-extrabold text-center text-gray-800 mb-8">
            <span class="text-indigo-600">ZeroGPT</span> AI Content Detector
        </h1>

        <div id="app" class="detection-card bg-white p-6 sm:p-10 rounded-xl shadow-lg border border-gray-100">
            
            <!-- User Input Area -->
            <div class="mb-6">
                <label for="text-input" class="block text-lg font-medium text-gray-700 mb-2">Paste Text for Analysis (Minimum 100 characters to enable button)</label>
                <textarea id="text-input" rows="10" 
                    class="w-full p-4 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-gray-800 transition duration-150" 
                    placeholder="Start typing or paste your content here..."></textarea>
            </div>

            <!-- Action Button -->
            <button onclick="checkZeroGPT()" id="detect-button"
                class="w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition duration-300 transform hover:scale-105 disabled:opacity-50 flex items-center justify-center"
                disabled>
                <svg id="spinner" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span id="button-text">Detect AI Content</span>
            </button>
            
            <!-- Character Counter -->
            <p id="char-count" class="mt-2 text-sm text-gray-500"></p>

            <!-- Results Section -->
            <div id="results-container" class="mt-8 pt-6 border-t border-gray-200 hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Detection Results</h2>
                
                <div class="flex flex-col sm:flex-row items-center justify-between bg-white p-6 rounded-xl border border-gray-200 shadow-md">
                    
                    <!-- Gauge Display -->
                    <div class="flex flex-col items-center mb-6 sm:mb-0">
                        <p class="text-sm font-medium text-gray-500 mb-3">AI-Generated Percentage</p>
                        <div class="gauge relative">
                            <div id="gauge-fill" class="gauge-fill" style="transform: rotate(180deg);"></div>
                            <div id="gauge-pointer" class="gauge-pointer" style="transform: rotate(180deg);"></div>
                            <div class="gauge-text text-xl top-1/2">
                                <span id="fake-percentage">0%</span>
                            </div>
                        </div>
                        <div class="flex justify-between w-[150px] mt-2 text-xs font-medium text-gray-600">
                            <span>Human</span>
                            <span>AI</span>
                        </div>
                    </div>

                    <!-- Summary Message -->
                    <div class="sm:w-2/3">
                        <p id="summary-message" class="text-xl font-semibold text-gray-800 mb-3 leading-relaxed">
                            --
                        </p>
                        <div id="ai-word-count" class="text-sm text-gray-600">
                            AI Words Detected: <span class="font-bold text-red-500">0</span>
                        </div>
                        <div id="total-word-count" class="text-sm text-gray-600">
                            Total Words Analyzed: <span class="font-bold">0</span>
                        </div>
                    </div>
                </div>

                <!-- Highlighted Text (Placeholder for now) -->
                <div class="mt-8">
                    <h3 class="text-lg font-semibold text-gray-700 mb-3">Analysis Detail (Full Text):</h3>
                    <div id="highlighted-output" class="p-4 bg-gray-50 border border-gray-200 rounded-lg text-gray-800 min-h-[100px] overflow-auto whitespace-pre-wrap">
                        <p class="text-sm text-gray-500">
                            *Note: Detailed sentence-level highlighting is typically complex and requires custom client-side parsing of specific API response metadata which is not available in the public documentation. We display the raw text and overall score.*
                        </p>
                    </div>
                </div>
            </div>

            <!-- Error/Status Message -->
            <div id="status-message" class="mt-6 p-4 bg-yellow-100 text-yellow-800 rounded-lg border border-yellow-200 hidden">
                --
            </div>
        </div>
    </div>

    <script>
        // *** IMPORTANT: The API Key provided by the user is placed here. ***
        // ZeroGPT API documentation often indicates that secure endpoints require a JWT Bearer Token, 
        // which may be different from the API Key, but we use the provided key as the token for now.
        const zeroGPT_API_Token = "31510944-6fba-4cdf-9424-5f6f10e58a4e"; 
        
        // ZeroGPT Text Detection Endpoint
        const zeroGPT_apiUrl = "https://api.zerogpt.com/api/v1/detectText"; 
        
        const textInput = document.getElementById('text-input');
        const detectButton = document.getElementById('detect-button');
        const resultsContainer = document.getElementById('results-container');
        const statusMessage = document.getElementById('status-message');
        const fakePercentageDisplay = document.getElementById('fake-percentage');
        const summaryMessage = document.getElementById('summary-message');
        const aiWordCountDisplay = document.querySelector('#ai-word-count span');
        const totalWordCountDisplay = document.querySelector('#total-word-count span');
        const highlightedOutput = document.getElementById('highlighted-output');
        const charCountElement = document.getElementById('char-count');
        const gaugeFill = document.getElementById('gauge-fill');
        const gaugePointer = document.getElementById('gauge-pointer');
        const spinner = document.getElementById('spinner');
        const buttonText = document.getElementById('button-text');

        // --- Utility Functions ---

        /** Updates the character count and enables/disables the button. */
        textInput.addEventListener('input', () => {
            const text = textInput.value;
            const length = text.length;
            charCountElement.textContent = `Characters: ${length}`;
            // Require at least 100 characters to enable the button
            if (length >= 100) { 
                detectButton.removeAttribute('disabled');
            } else {
                detectButton.setAttribute('disabled', 'true');
            }
        });

        /** * Displays a status/error message to the user.
         * @param {string} message The message content.
         * @param {string} type 'success', 'error', or 'info'.
         */
        function displayStatus(message, type = 'info') {
            statusMessage.textContent = message;
            statusMessage.className = 'mt-6 p-4 rounded-lg border';
            statusMessage.classList.remove('hidden');

            if (type === 'error') {
                statusMessage.classList.add('bg-red-100', 'text-red-800', 'border-red-200');
            } else if (type === 'success') {
                statusMessage.classList.add('bg-green-100', 'text-green-800', 'border-green-200');
            } else {
                statusMessage.classList.add('bg-yellow-100', 'text-yellow-800', 'border-yellow-200');
            }
        }

        /** Converts the AI percentage into a readable message. */
        function getSummary(percentage) {
            if (percentage >= 80) return "High Confidence: Likely AI-Generated Content. Please review for originality.";
            if (percentage >= 50) return "Moderate Confidence: Mixed Content or High Likelihood of AI-Generated Text.";
            if (percentage >= 20) return "Low Confidence: Mostly Human-Written Content, but some AI-like patterns detected.";
            return "Very High Confidence: Likely Human-Written Content. Excellent work!";
        }

        /** Updates the visual gauge based on the AI percentage. */
        function updateGauge(percentage) {
            // Calculate the angle for the pointer (180 degrees is 0% AI, 0 degrees is 100% AI)
            const pointerAngle = 180 * (1 - (percentage / 100));
            
            // Gauge fill needs to be rotated to show the percentage of AI (red area)
            const fillAngle = 180 - pointerAngle;

            gaugeFill.style.transform = `rotate(${fillAngle}deg)`;
            gaugePointer.style.transform = `rotate(${pointerAngle}deg)`;
        }

        /** Resets the results view before a new check. */
        function resetResults() {
            resultsContainer.classList.add('hidden');
            statusMessage.classList.add('hidden');
            fakePercentageDisplay.textContent = '0%';
            summaryMessage.textContent = '--';
            aiWordCountDisplay.textContent = '0';
            totalWordCountDisplay.textContent = '0';
            highlightedOutput.innerHTML = '<p class="text-sm text-gray-500">*Note: Detailed sentence-level highlighting is typically complex and requires custom client-side parsing of specific API response metadata which is not available in the public documentation. We display the raw text and overall score.*</p>';
            updateGauge(0);
        }

        /** Sets the loading state on the button. */
        function setLoading(isLoading) {
            detectButton.setAttribute('disabled', isLoading || textInput.value.length < 100);
            spinner.classList.toggle('hidden', !isLoading);
            buttonText.textContent = isLoading ? 'Detecting...' : 'Detect AI Content';
        }

        // --- Main ZeroGPT API Logic ---

        async function checkZeroGPT() {
            const inputText = textInput.value.trim();
            resetResults();

            if (!inputText) {
                displayStatus("Please enter some text to analyze.", 'info');
                return;
            }

            setLoading(true);

            // The ZeroGPT request body requires 'input_text'
            const payload = {
                input_text: inputText
            };
            
            const maxRetries = 3;
            let attempt = 0;

            while (attempt < maxRetries) {
                try {
                    const response = await fetch(zeroGPT_apiUrl, {
                        method: 'POST',
                        headers: {
                            // Using the provided API key in the Bearer token field
                            'Authorization': `Bearer ${zeroGPT_API_Token}`,
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(payload)
                    });

                    // Check for HTTP errors
                    if (response.status === 401 || response.status === 403) {
                         throw new Error(`Authentication failed (Status ${response.status}). Check if the key is correct and if it should be a full JWT Bearer Token instead of the API Key.`);
                    }
                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        throw new Error(`API Request failed with status ${response.status}. Message: ${errorData.message || 'Server error or usage limit reached.'}`);
                    }

                    const result = await response.json();
                    
                    if (result.success && result.data) {
                        const data = result.data;
                        // fakePercentage is the key that represents the AI score
                        const fakePercentage = Math.round(data.fakePercentage || 0);
                        
                        // Update UI with results
                        fakePercentageDisplay.textContent = `${fakePercentage}%`;
                        summaryMessage.textContent = getSummary(fakePercentage);
                        aiWordCountDisplay.textContent = data.aiWords || 0;
                        totalWordCountDisplay.textContent = data.textWords || 0;
                        highlightedOutput.textContent = inputText; // Display the original text
                        updateGauge(fakePercentage);

                        resultsContainer.classList.remove('hidden');
                        displayStatus("Analysis complete!", 'success');
                    } else {
                        // Handle success: false case from the API body
                        throw new Error(result.message || 'Detection failed. Please check the API response details.');
                    }
                    
                    break; // Exit the retry loop on success

                } catch (error) {
                    console.error("ZeroGPT API Error:", error);
                    attempt++;
                    if (attempt < maxRetries) {
                        const delay = Math.pow(2, attempt) * 1000; // Exponential backoff (2s, 4s, ...)
                        await new Promise(resolve => setTimeout(resolve, delay));
                        displayStatus(`API call failed (Attempt ${attempt}/${maxRetries}). Retrying in ${delay / 1000}s...`, 'info');
                    } else {
                        displayStatus(`Final API call failed: ${error.message}. If the error is related to authentication, you might need a full JWT Bearer Token, not just the API Key.`, 'error');
                    }
                }
            }
            
            setLoading(false);
        }

        // Initialize button state and character count on load
        document.addEventListener('DOMContentLoaded', () => {
            textInput.value = '';
            textInput.dispatchEvent(new Event('input'));
        });

    </script>
</body>
</html>
