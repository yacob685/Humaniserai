<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Web Service Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
    
    <!-- PayPal Buttons SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=USD&intent=capture"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="w-full max-w-md">
        <div class="text-center mb-8">
            <a href="index.html" class="text-3xl font-bold text-indigo-600">Web Service Hub</a>
            <h2 class="mt-6 text-3xl font-extrabold text-gray-900">
                Create your account
            </h2>
            <p class="mt-2 text-sm text-gray-600">
                A subscription of **$1 USD/month** is required for full tool access.
            </p>
        </div>

        <form id="signupForm" class="bg-white p-8 rounded-xl shadow-2xl space-y-6">
            <h3 class="text-xl font-semibold text-gray-800 border-b pb-2">1. Account Details</h3>
            <div>
                <label for="reg-email" class="block text-sm font-medium text-gray-700">Email address</label>
                <input id="reg-email" name="email" type="email" autocomplete="email" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
            </div>
            <div>
                <label for="reg-password" class="block text-sm font-medium text-gray-700">Password</label>
                <input id="reg-password" name="password" type="password" autocomplete="new-password" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
            </div>
            <button id="registerBtn" type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150">
                Register Account
            </button>
            <p id="regMessage" class="text-center text-sm font-medium"></p>
        </form>

       <div id="paymentSection" class="bg-white p-8 rounded-xl shadow-2xl space-y-6 mt-6 hidden">
    <h3 class="text-xl font-semibold text-gray-800 border-b pb-2">2. Complete Payment ($1.00 USD)</h3>
    <p id="payment-email-display" class="text-sm font-medium text-gray-700 mb-4"></p>
    
    <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-4">
        <div class="flex items-start">
            <svg class="w-6 h-6 text-blue-600 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
            </svg>
            <div>
                <h4 class="font-semibold text-blue-900 mb-1">Real PayPal Payment Required</h4>
                <p class="text-sm text-blue-800">You must complete a <strong>$1.00 USD</strong> payment to activate your subscription. Use PayPal buttons below.</p>
            </div>
        </div>
    </div>

    <!-- Method 1: PayPal Smart Buttons (Automatic Verification) -->
    <div class="border-2 border-green-200 rounded-lg p-4 bg-green-50">
        <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
            <span class="bg-green-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-2">1</span>
            Recommended: Pay with PayPal (Auto-Verified)
        </h4>
        <p class="text-sm text-gray-600 mb-3">Click below to pay securely. Access activates automatically after payment.</p>
        
        <!-- PayPal Button Container -->
        <div id="paypal-button-container" class="min-h-[150px] bg-white rounded-lg p-2"></div>
    </div>

    <div class="relative flex justify-center text-sm">
        <span class="px-3 bg-white text-gray-500 font-medium">OR</span>
    </div>

    <!-- Method 2: Manual PayPal.me Payment (Manual Verification) -->
    <div class="border-2 border-yellow-200 rounded-lg p-4 bg-yellow-50">
        <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
            <span class="bg-yellow-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-2">2</span>
            Alternative: Pay via PayPal.me Link
        </h4>
        <p class="text-sm text-gray-600 mb-3">Send payment manually, then enter your PayPal Transaction ID to verify.</p>
        
        <a id="manual-paypal-link" href="https://www.paypal.com/paypalme/yacobokour/1" target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-all mb-3">
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.067 8.478c.492.88.556 2.014.3 3.327-.74 3.806-3.276 5.12-6.514 5.12h-.5a.805.805 0 00-.794.68l-.04.22-.63 3.993-.032.17a.804.804 0 01-.794.679H7.72a.483.483 0 01-.477-.558l.722-4.58.062-.39.644-4.086.066-.415a.81.81 0 01.794-.679h1.372c2.63 0 4.556-.804 5.556-2.443.434-.711.682-1.556.745-2.505a3.85 3.85 0 00-.043-1.095c1.493.838 2.17 2.39 1.748 4.61z"/>
            </svg>
            Open PayPal.me/yacobokour
        </a>

        <div class="mt-3 space-y-2">
            <label class="block text-sm font-medium text-gray-700">After payment, enter Transaction ID:</label>
            <div class="flex gap-2">
                <input type="text" id="transaction-id-input" placeholder="e.g., 1AB23456CD789012E" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" maxlength="17">
                <button id="verify-payment-btn" disabled class="px-4 py-2 bg-gray-300 text-gray-500 rounded-lg font-semibold cursor-not-allowed transition-all" title="Enter Transaction ID first">
                    Verify Payment
                </button>
            </div>
            <p class="text-xs text-gray-500">
                <svg class="w-3 h-3 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                </svg>
                Find your Transaction ID in your PayPal account under Activity ‚Üí Details
            </p>
        </div>

        <div id="verification-status" class="hidden mt-3 p-3 rounded-lg"></div>
    </div>

    <p id="paymentMessage" class="text-center text-sm font-medium mt-4"></p>
    
    <!-- Payment Status Indicator -->
    <div id="payment-status-indicator" class="hidden mt-4 p-4 bg-gray-50 border-2 border-gray-200 rounded-lg">
        <div class="flex items-center justify-between">
            <div class="flex items-center">
                <div id="status-icon" class="mr-3"></div>
                <div>
                    <p id="status-text" class="font-semibold text-gray-800"></p>
                    <p id="status-subtext" class="text-sm text-gray-600"></p>
                </div>
            </div>
            <div id="status-spinner" class="hidden">
                <svg class="animate-spin h-6 w-6 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            </div>
        </div>
    </div>
</div>
   <script>
    let currentEmail = '';
    let currentUserId = '';
    const USERS_KEY = 'webServiceHub_users';
    const CURRENT_USER_KEY = 'webServiceHub_currentUser';
    const VERIFIED_TRANSACTIONS_KEY = 'webServiceHub_verifiedTransactions';

    // PayPal API credentials (use your own)
    const PAYPAL_CLIENT_ID = 'AUc63Ztp4AmdRF0gTfVgNAdnG1rbh_Z4QJNHvOW3Xf5drN2OQEaNBaooyc3uY6KLXljNIp_LaHV2G-oG'; // Get from PayPal Developer Dashboard
    const PAYPAL_EMAIL = 'yacobokour13579@gmail.com'; // Your PayPal email

    // Helper functions
    function getAllUsers() {
        const users = localStorage.getItem(USERS_KEY);
        return users ? JSON.parse(users) : {};
    }

    function saveAllUsers(users) {
        localStorage.setItem(USERS_KEY, JSON.stringify(users));
    }

    function getCurrentUser() {
        const user = localStorage.getItem(CURRENT_USER_KEY);
        return user ? JSON.parse(user) : null;
    }

    function saveCurrentUser(user) {
        localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));
    }

    function getVerifiedTransactions() {
        const transactions = localStorage.getItem(VERIFIED_TRANSACTIONS_KEY);
        return transactions ? JSON.parse(transactions) : [];
    }

    function saveVerifiedTransaction(transactionId) {
        const transactions = getVerifiedTransactions();
        if (!transactions.includes(transactionId)) {
            transactions.push(transactionId);
            localStorage.setItem(VERIFIED_TRANSACTIONS_KEY, JSON.stringify(transactions));
        }
    }

    function isTransactionVerified(transactionId) {
        return getVerifiedTransactions().includes(transactionId);
    }

    // Check if already logged in and subscribed
    window.addEventListener('DOMContentLoaded', function() {
        const currentUser = getCurrentUser();
        if (currentUser && currentUser.subscribed) {
            window.location.href = 'inde1x.html';
        }
    });

    // --- Step 1: Registration Logic ---
    document.getElementById('signupForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const email = document.getElementById('reg-email').value.trim();
        const password = document.getElementById('reg-password').value;
        const regMessage = document.getElementById('regMessage');
        const submitButton = document.getElementById('registerBtn');
        
        submitButton.disabled = true;
        submitButton.textContent = 'Creating account...';
        regMessage.textContent = '';

        // Validate
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            regMessage.textContent = 'Invalid email format.';
            regMessage.className = 'text-center text-sm font-medium text-red-600';
            submitButton.disabled = false;
            submitButton.textContent = 'Register Account';
            return;
        }

        if (password.length < 6) {
            regMessage.textContent = 'Password must be at least 6 characters.';
            regMessage.className = 'text-center text-sm font-medium text-red-600';
            submitButton.disabled = false;
            submitButton.textContent = 'Register Account';
            return;
        }

        try {
            const users = getAllUsers();
            
            if (users[email]) {
                throw new Error('EMAIL_EXISTS');
            }
            
            const userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            const newUser = {
                userId: userId,
                email: email,
                password: btoa(password),
                subscribed: false,
                createdAt: new Date().toISOString(),
                chats: {},
                activeChatId: null,
                studyData: {
                    flashcards: [],
                    quizzes: [],
                    studyPlans: [],
                    mindmaps: null
                }
            };
            
            users[email] = newUser;
            saveAllUsers(users);
            
            currentEmail = email;
            currentUserId = userId;
            
            console.log('‚úÖ Account created:', email);
            saveCurrentUser(newUser);
            
            regMessage.textContent = 'Account created! Complete payment below to activate.';
            regMessage.className = 'text-center text-sm font-medium text-green-600';

            document.getElementById('payment-email-display').textContent = `Subscription for: ${email}`;
            document.getElementById('paymentSection').classList.remove('hidden');
            document.getElementById('signupForm').classList.add('hidden');
            
            initializePayPalButtons();
            
        } catch (error) {
            console.error('‚ùå Signup error:', error);
            
            submitButton.disabled = false;
            submitButton.textContent = 'Register Account';
            
            let errorMessage = 'Failed to create account. Please try again.';
            if (error.message === 'EMAIL_EXISTS') {
                errorMessage = 'This email is already registered. Please login instead.';
            }
            
            regMessage.textContent = errorMessage;
            regMessage.className = 'text-center text-sm font-medium text-red-600';
        }
    });

    // Initialize PayPal Smart Payment Buttons
    function initializePayPalButtons() {
        if (typeof paypal === 'undefined') {
            console.error('PayPal SDK not loaded');
            showPaymentStatus('error', 'PayPal SDK failed to load', 'Please refresh the page or use manual payment method.');
            return;
        }

        paypal.Buttons({
            style: {
                shape: 'rect',
                color: 'gold',
                layout: 'vertical',
                label: 'paypal',
                height: 50
            },

            createOrder: function(data, actions) {
                showPaymentStatus('processing', 'Creating payment order...', 'Please wait');
                
                return actions.order.create({
                    purchase_units: [{
                        description: 'Web Service Hub - Monthly Subscription',
                        amount: {
                            currency_code: 'USD',
                            value: '1.00'
                        },
                        payee: {
                            email_address: PAYPAL_EMAIL
                        }
                    }],
                    application_context: {
                        shipping_preference: 'NO_SHIPPING',
                        brand_name: 'Web Service Hub',
                        user_action: 'PAY_NOW'
                    }
                });
            },

            onApprove: function(data, actions) {
                showPaymentStatus('processing', 'Processing payment...', 'Verifying your transaction');
                
                return actions.order.capture().then(function(orderData) {
                    console.log('‚úÖ Payment captured!', orderData);
                    
                    // Extract payment details
                    const transactionId = orderData.purchase_units[0].payments.captures[0].id;
                    const paymentDetails = {
                        orderId: orderData.id,
                        transactionId: transactionId,
                        payerId: orderData.payer.payer_id,
                        payerEmail: orderData.payer.email_address,
                        payerName: orderData.payer.name.given_name + ' ' + orderData.payer.name.surname,
                        amount: orderData.purchase_units[0].amount.value,
                        currency: orderData.purchase_units[0].amount.currency_code,
                        status: orderData.status,
                        timestamp: new Date().toISOString(),
                        paymentMethod: 'PayPal Smart Buttons',
                        verified: true
                    };
                    
                    // Save verified transaction
                    saveVerifiedTransaction(transactionId);
                    
                    // Show success
                    showPaymentStatus('success', 'Payment Verified! ‚úì', `Transaction ID: ${transactionId}`);
                    
                    // Activate subscription
                    setTimeout(() => {
                        completeSubscription(paymentDetails);
                    }, 1500);
                });
            },

            onError: function(err) {
                console.error('‚ùå PayPal error:', err);
                showPaymentStatus('error', 'Payment Failed', 'Please try again or use manual payment method.');
            },

            onCancel: function(data) {
                console.log('Payment cancelled', data);
                showPaymentStatus('cancelled', 'Payment Cancelled', 'You can try again when ready.');
            }

        }).render('#paypal-button-container');
    }

    // Enable verify button only when transaction ID is entered
    const transactionInput = document.getElementById('transaction-id-input');
    const verifyButton = document.getElementById('verify-payment-btn');

    transactionInput.addEventListener('input', function() {
        const transactionId = this.value.trim();
        
        if (transactionId.length >= 10) {
            verifyButton.disabled = false;
            verifyButton.className = 'px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold cursor-pointer transition-all';
            verifyButton.title = 'Click to verify your payment';
        } else {
            verifyButton.disabled = true;
            verifyButton.className = 'px-4 py-2 bg-gray-300 text-gray-500 rounded-lg font-semibold cursor-not-allowed transition-all';
            verifyButton.title = 'Enter Transaction ID first';
        }
    });

    // Manual payment verification
    verifyButton.addEventListener('click', async function() {
        const transactionId = transactionInput.value.trim();
        const verificationStatus = document.getElementById('verification-status');
        
        if (!transactionId || transactionId.length < 10) {
            showVerificationStatus('error', 'Invalid Transaction ID. Please check and try again.');
            return;
        }

        // Disable button during verification
        this.disabled = true;
        this.textContent = 'Verifying...';
        showPaymentStatus('processing', 'Verifying payment...', 'Checking transaction with PayPal');

        try {
            // Check if already verified
            if (isTransactionVerified(transactionId)) {
                throw new Error('DUPLICATE_TRANSACTION');
            }

            // Simulate API verification (In production, you'd call PayPal API here)
            // For now, we'll verify format and save
            const isValidFormat = /^[A-Z0-9]{17}$/i.test(transactionId);
            
            if (!isValidFormat) {
                throw new Error('INVALID_FORMAT');
            }

            // Simulate network delay
            await new Promise(resolve => setTimeout(resolve, 2000));

            // Save verified transaction
            saveVerifiedTransaction(transactionId);

            const paymentDetails = {
                orderId: 'MANUAL_' + Date.now(),
                transactionId: transactionId,
                paymentMethod: 'PayPal.me Manual',
                amount: '1.00',
                currency: 'USD',
                status: 'VERIFIED',
                timestamp: new Date().toISOString(),
                verified: true,
                note: 'Manually verified transaction'
            };

            showVerificationStatus('success', `‚úì Payment Verified! Transaction ID: ${transactionId}`);
            showPaymentStatus('success', 'Payment Confirmed!', 'Activating your subscription...');

            setTimeout(() => {
                completeSubscription(paymentDetails);
            }, 1500);

        } catch (error) {
            console.error('‚ùå Verification error:', error);
            
            this.disabled = false;
            this.textContent = 'Verify Payment';
            
            let errorMessage = 'Verification failed. Please check your Transaction ID.';
            
            if (error.message === 'DUPLICATE_TRANSACTION') {
                errorMessage = 'This transaction has already been used. Each payment can only be used once.';
            } else if (error.message === 'INVALID_FORMAT') {
                errorMessage = 'Invalid Transaction ID format. It should be 17 characters (letters and numbers).';
            }
            
            showVerificationStatus('error', errorMessage);
            showPaymentStatus('error', 'Verification Failed', errorMessage);
        }
    });

    // Show verification status
    function showVerificationStatus(type, message) {
        const verificationStatus = document.getElementById('verification-status');
        verificationStatus.classList.remove('hidden');
        
        if (type === 'success') {
            verificationStatus.className = 'mt-3 p-3 rounded-lg bg-green-50 border-2 border-green-300 text-green-800';
            verificationStatus.innerHTML = `<div class="flex items-center"><svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>${message}</div>`;
        } else {
            verificationStatus.className = 'mt-3 p-3 rounded-lg bg-red-50 border-2 border-red-300 text-red-800';
            verificationStatus.innerHTML = `<div class="flex items-center"><svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/></svg>${message}</div>`;
        }
    }

    // Show payment status indicator
    function showPaymentStatus(status, mainText, subText) {
        const indicator = document.getElementById('payment-status-indicator');
        const icon = document.getElementById('status-icon');
        const text = document.getElementById('status-text');
        const subtext = document.getElementById('status-subtext');
        const spinner = document.getElementById('status-spinner');
        
        indicator.classList.remove('hidden');
        spinner.classList.add('hidden');
        
        if (status === 'processing') {
            indicator.className = 'mt-4 p-4 bg-blue-50 border-2 border-blue-300 rounded-lg';
            icon.innerHTML = '<svg class="animate-spin h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>';
        } else if (status === 'success') {
            indicator.className = 'mt-4 p-4 bg-green-50 border-2 border-green-300 rounded-lg';
            icon.innerHTML = '<svg class="h-8 w-8 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>';
        } else if (status === 'error') {
            indicator.className = 'mt-4 p-4 bg-red-50 border-2 border-red-300 rounded-lg';
            icon.innerHTML = '<svg class="h-8 w-8 text-red-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/></svg>';
        } else if (status === 'cancelled') {
            indicator.className = 'mt-4 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-lg';
            icon.innerHTML = '<svg class="h-8 w-8 text-yellow-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/></svg>';
        }
        
        text.textContent = mainText;
        subtext.textContent = subText;
    }

    // Complete subscription
    function completeSubscription(paymentDetails) {
        try {
            const users = getAllUsers();
            const currentUser = getCurrentUser();
            
            if (!currentUser || !users[currentEmail]) {
                throw new Error('User not found');
            }
            
            users[currentEmail].subscribed = true;
            users[currentEmail].subscriptionDate = new Date().toISOString();
            users[currentEmail].paymentDetails = paymentDetails;
            users[currentEmail].lastPaymentDate = new Date().toISOString();
            
            saveAllUsers(users);
            saveCurrentUser(users[currentEmail]);
            
            console.log('‚úÖ Subscription activated for:', currentEmail);
            
            showPaymentStatus('success', 'üéâ Welcome to Web Service Hub!', 'Redirecting to your dashboard...');
            
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 2000);
            
        } catch (error) {
            console.error('‚ùå Subscription error:', error);
            showPaymentStatus('error', 'Activation Failed', 'Please contact support with your payment confirmation.');
        }
    }
</script>
</body>
</html>
