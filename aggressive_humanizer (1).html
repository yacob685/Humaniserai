<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultra-Human Content Generator Pro</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background: #f3f4f6;
    min-height: 100vh;
    color: #2c3e50;
}

header {
    background-color: white;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
}

nav {
    max-width: 1400px;
    margin: 0 auto;
    padding: 1rem 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

nav a.nav-brand {
    font-size: 1.5rem;
    font-weight: 700;
    color: #4f46e5;
    text-decoration: none;
}

.nav-links {
    display: flex;
    gap: 1.5rem;
    align-items: center;
}

.nav-links a {
    color: #6b7280;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s;
}

.nav-links a:hover {
    color: #4f46e5;
}

.container {
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    max-width: 1400px;
    width: 90%;
    margin: 2rem auto;
    padding: 40px;
    border: 1px solid #e0e0e0;
}

h1 {
    text-align: center;
    color: #2c3e50;
    margin-bottom: 8px;
    font-size: 2.2em;
    font-weight: 700;
}

.subtitle {
    text-align: center;
    color: #6c757d;
    margin-bottom: 12px;
    font-size: 1.1em;
    font-weight: 400;
}

.power-badge {
    text-align: center;
    background: linear-gradient(135deg, #e74c3c, #c0392b);
    color: white;
    padding: 12px 28px;
    border-radius: 25px;
    display: block;
    width: fit-content;
    margin: 0 auto 30px auto;
    font-weight: 600;
    font-size: 0.95em;
    box-shadow: 0 2px 10px rgba(231, 76, 60, 0.3);
}

.api-section {
    margin-bottom: 25px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 12px;
    border: 1px solid #dee2e6;
}

.api-section label {
    color: #495057 !important;
}

.input-group {
    margin-bottom: 20px;
}

label {
    display: block;
    margin-bottom: 8px;
    color: #495057;
    font-weight: 600;
    font-size: 0.95em;
}

input[type="text"],
textarea,
select,
input[type="number"] {
    width: 100%;
    padding: 14px;
    border: 2px solid #dee2e6;
    border-radius: 8px;
    font-size: 15px;
    transition: all 0.3s;
    font-family: inherit;
    background: white;
}

select {
    cursor: pointer;
}

input[type="text"]:focus,
textarea:focus,
select:focus,
input[type="number"]:focus {
    outline: none;
    border-color: #e74c3c;
    box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
}

textarea {
    resize: vertical;
    min-height: 120px;
    line-height: 1.6;
}

.controls-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 18px;
    margin-bottom: 25px;
}

.button-container {
    display: flex;
    gap: 15px;
    margin-bottom: 25px;
}

button {
    flex: 1;
    padding: 16px 32px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
}

.generate-btn {
    background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
    color: white;
    box-shadow: 0 2px 10px rgba(231, 76, 60, 0.3);
}

.generate-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(231, 76, 60, 0.4);
}

.generate-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.clear-btn {
    background: linear-gradient(135deg, #6c757d, #5a6268);
    color: white;
}

.clear-btn:hover {
    background: linear-gradient(135deg, #5a6268, #495057);
    transform: translateY(-2px);
}

.output-section {
    background: #f8f9fa;
    padding: 25px;
    border-radius: 12px;
    min-height: 400px;
    position: relative;
    border: 2px solid #dee2e6;
}

.output-content {
    white-space: pre-wrap;
    line-height: 1.8;
    color: #2c3e50;
    font-size: 15px;
}

.loading {
    display: none;
    text-align: center;
    padding: 60px 20px;
}

.loading.active {
    display: block;
}

.spinner {
    border: 5px solid #e9ecef;
    border-top: 5px solid #e74c3c;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 0.8s linear infinite;
    margin: 0 auto 20px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-text {
    color: #e74c3c;
    font-weight: 600;
    font-size: 1.1em;
    margin-bottom: 8px;
}

.loading-subtext {
    color: #6c757d;
    font-size: 0.95em;
    font-weight: 400;
}

.copy-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    padding: 10px 20px;
    background: linear-gradient(135deg, #28a745, #218838);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.3s;
}

.copy-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 2px 12px rgba(40, 167, 69, 0.4);
}

.error {
    background: linear-gradient(135deg, #dc3545, #c82333);
    color: white;
    padding: 16px;
    border-radius: 8px;
    margin-bottom: 20px;
    display: none;
    border: 1px solid #bd2130;
    font-weight: 500;
}

.error.active {
    display: block;
}

.success {
    background: linear-gradient(135deg, #28a745, #218838);
    color: white;
    padding: 16px;
    border-radius: 8px;
    margin-bottom: 20px;
    display: none;
    border: 1px solid #1e7e34;
    font-weight: 500;
}

.success.active {
    display: block;
}

.stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 15px;
    margin-top: 30px;
    padding-top: 30px;
    border-top: 2px solid #dee2e6;
}

.stat-item {
    text-align: center;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 10px;
    border: 1px solid #dee2e6;
    transition: all 0.3s;
}

.stat-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    border-color: #e74c3c;
}

.stat-value {
    font-size: 28px;
    font-weight: 700;
    color: #e74c3c;
}

.stat-label {
    color: #6c757d;
    font-size: 0.85em;
    margin-top: 8px;
    font-weight: 500;
}

.human-score {
    text-align: center;
    margin-top: 20px;
    padding: 18px;
    background: linear-gradient(135deg, #28a745, #218838);
    color: white;
    border-radius: 10px;
    font-weight: 600;
    font-size: 1.05em;
    display: none;
    box-shadow: 0 2px 12px rgba(40, 167, 69, 0.3);
    border: 1px solid #1e7e34;
}

.human-score.active {
    display: block;
}

.intensity-slider {
    margin-bottom: 25px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 12px;
    border: 1px solid #dee2e6;
}

.slider-container {
    margin-top: 12px;
}

input[type="range"] {
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: linear-gradient(to right, #e74c3c, #c0392b);
    outline: none;
    -webkit-appearance: none;
}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #e74c3c;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(231, 76, 60, 0.4);
}

input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #e74c3c;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(231, 76, 60, 0.4);
    border: none;
}

.intensity-label {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
    font-weight: 500;
    color: #495057;
    font-size: 0.9em;
}

.feature-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 25px;
    justify-content: center;
}

.badge {
    background: #e9ecef;
    color: #495057;
    padding: 8px 16px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.8em;
    border: 1px solid #dee2e6;
}

@media (max-width: 768px) {
    .nav-links {
        display: none;
    }
    
    .container {
        width: 95%;
        padding: 20px;
    }
    
    h1 {
        font-size: 1.8em;
    }
}

        .history-item {
    background: white;
    padding: 15px;
    margin-bottom: 12px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
    cursor: pointer;
    transition: all 0.3s;
}

.history-item:hover {
    border-color: #e74c3c;
    box-shadow: 0 2px 8px rgba(231, 76, 60, 0.2);
    transform: translateX(5px);
}

.history-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.history-title {
    font-weight: 600;
    color: #2c3e50;
    font-size: 0.95em;
}

.history-date {
    font-size: 0.8em;
    color: #6c757d;
}

.history-preview {
    color: #495057;
    font-size: 0.85em;
    line-height: 1.4;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.history-meta {
    display: flex;
    gap: 15px;
    margin-top: 8px;
    font-size: 0.75em;
    color: #6c757d;
}

.history-badge {
    background: #e9ecef;
    padding: 3px 8px;
    border-radius: 4px;
    font-weight: 600;
}

.delete-history-btn {
    padding: 4px 10px;
    background: #dc3545;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.75em;
    font-weight: 600;
    margin-left: 10px;
}

.delete-history-btn:hover {
    background: #c82333;
}
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="nav-brand">Web Service Hub</a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="index.html#tools">All Tools</a>
            </div>
        </nav>
    </header>
    
    <div class="container">
        <h1>🚀 ULTRA-HUMAN CONTENT GENERATOR PRO</h1>
        <p class="subtitle">Generate Authentically Human Content from Scratch - Zero AI Detection</p>
        <div class="power-badge">🔥 DIRECT HUMAN GENERATION | 100% UNDETECTABLE</div>

        <div class="mode-toggle" style="text-align: center; margin-bottom: 25px;">
    <label style="font-weight: 600; color: #495057; margin-bottom: 10px; display: block;">🎯 OPERATION MODE:</label>
    <div style="display: inline-flex; background: #e9ecef; border-radius: 10px; padding: 4px;">
        <button type="button" id="generateMode" class="mode-btn active" style="padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; background: linear-gradient(135deg, #e74c3c, #c0392b); color: white;">
            🚀 Generate New Content
        </button>
        <button type="button" id="humanizeMode" class="mode-btn" style="padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; background: transparent; color: #495057;">
            ✨ Humanize Existing Text
        </button>
    </div>
</div>
        <div class="feature-badges">
            <span class="badge">🎯 NATIVE HUMAN GENERATION</span>
            <span class="badge">⚡ ZERO AI PATTERNS</span>
            <span class="badge">📰 ALL CONTENT TYPES</span>
            <span class="badge">🎓 ACADEMIC GRADE</span>
            <span class="badge">💼 PROFESSIONAL READY</span>
            <span class="badge">🚀 MAXIMUM AUTHENTICITY</span>
        </div>

        <div class="api-section" style="display: none;">
            <div class="input-group">
                <label for="apiKey"></label>
                <div style="display: none;">
                    <input type="text" id="apiKey" value="AIzaSyBIAAAwdRvVuUMyq2RfLYo2HapOe_25j1c">
                </div>
            </div>
        </div>

        <div class="intensity-slider">
            <label>🔥 HUMAN AUTHENTICITY LEVEL:</label>
            <div class="slider-container">
                <input type="range" id="intensity" min="1" max="3" value="3" step="1">
                <div class="intensity-label">
                    <span>Natural</span>
                    <span id="intensityValue">ULTRA-HUMAN</span>
                    <span>Maximum</span>
                </div>
            </div>
        </div>

        <div class="controls-grid">
            <div class="input-group">
                <label for="category">🎯 Content Category:</label>
                <select id="category">
                    <option value="journalism">📰 Journalism & News</option>
                    <option value="academic">🎓 Academic & Research</option>
                    <option value="business">💼 Business & Professional</option>
                    <option value="creative">✨ Creative & Marketing</option>
                    <option value="technical">⚙️ Technical & Documentation</option>
                </select>
            </div>
            <div class="input-group">
                <label for="mode">📚 Specific Type:</label>
                <select id="mode">
                    <!-- Options will be populated based on category -->
                </select>
            </div>
            <div class="input-group">
                <label for="wordCount">📊 Target Word Count:</label>
                <input type="number" id="wordCount" min="100" max="5000" value="800" step="50">
            </div>
        </div>

        <div class="error" id="error"></div>
        <div class="success" id="success"></div>

      <!-- Generate Mode Inputs -->
<div id="generateInputs">
    <div class="input-group">
        <label for="topic">📝 Content Topic/Brief:</label>
        <textarea id="topic" placeholder="Describe what you want the content to be about. Be specific about key points, angle, or requirements..."></textarea>
    </div>

    <div class="input-group">
        <label for="keywords">🔑 Key Points/Keywords (Optional):</label>
        <input type="text" id="keywords" placeholder="Enter key points or keywords separated by commas (e.g., innovation, technology, sustainability)">
    </div>
</div>

<!-- Humanize Mode Inputs -->
<div id="humanizeInputs" style="display: none;">
    <div class="input-group">
        <label for="existingText">📄 Paste Your Text to Humanize:</label>
        <textarea id="existingText" placeholder="Paste your text here. All citations, researcher names, dates, and specific data will be preserved exactly as written..." style="min-height: 300px;"></textarea>
    </div>
    
    <div class="input-group" style="padding: 15px; background: #fff3cd; border-radius: 8px; border: 1px solid #ffc107;">
        <label style="color: #856404; display: flex; align-items: center; gap: 8px;">
            <span style="font-size: 1.2em;">⚠️</span>
            <span>PRESERVATION GUARANTEE:</span>
        </label>
        <ul style="margin: 10px 0 0 25px; color: #856404; line-height: 1.8;">
            <li>All researcher names preserved exactly (e.g., "Smith (2023)", "Johnson et al.")</li>
            <li>All dates and years maintained precisely</li>
            <li>All citations and references kept intact</li>
            <li>All statistics, percentages, and numbers unchanged</li>
            <li>All specific research findings preserved verbatim</li>
            <li>Technical terms and discipline-specific vocabulary protected</li>
        </ul>
    </div>
</div>

        <div class="button-container">
            <button class="generate-btn" id="generateBtn">🚀 GENERATE HUMAN CONTENT</button>
            <button class="clear-btn" id="clearBtn">🗑️ CLEAR ALL</button>
        </div>

        <div class="output-section">
            <button class="copy-btn" id="copyBtn" style="display: none;">📋 COPY TEXT</button>
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p class="loading-text" id="loadingText">🚀 GENERATING AUTHENTIC HUMAN CONTENT</p>
                <p class="loading-subtext" id="loadingSubtext">Creating naturally human text with zero AI patterns...</p>
            </div>
            <div class="output-content" id="output"></div>
        </div>

        <div class="human-score" id="humanScore"></div>

<!-- Chat History Section -->
        <div class="chat-history-section" style="margin-top: 30px; padding: 25px; background: #f8f9fa; border-radius: 12px; border: 2px solid #dee2e6;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="margin-right:  30px; color: #2c3e50; font-size: 1.3em;">📜 Chat History</h3>
                <button id="clearHistoryBtn" style="padding: 8px 16px; background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9em;">🗑️ Clear History</button>
            </div>
            <div id="chatHistoryList" style="max-height: 400px; overflow-y: auto;">
                <!-- History items will be inserted here -->
            </div>
            <p id="noHistory" style="text-align: center; color: #6c757d; padding: 40px; display: none;">No chat history yet. Generate or humanize content to start!</p>
        </div>

        <div class="stats">         
            <div class="stat-item">
                <div class="stat-value" id="outputWords">0</div>
                <div class="stat-label">Words Generated</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="outputChars">0</div>
                <div class="stat-label">Characters</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="sentences">0</div>
                <div class="stat-label">Sentences</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="paragraphs">0</div>
                <div class="stat-label">Paragraphs</div>
            </div>
        </div>
    </div>

   <script>
    // Content type categories
    const contentTypes = {
        journalism: {
            'news': '📰 News Article',
            'investigative': '🔍 Investigative Journalism',
            'feature': '📝 Feature Article',
            'editorial': '💭 Editorial/Opinion',
            'breaking': '⚡ Breaking News',
            'analysis': '📊 News Analysis',
            'interview': '🎤 Interview Article',
            'press-release': '📢 Press Release'
        },
       academic: {
    'essay': '📖 Academic Essay',
    'research': '🔬 Research Report',
    'analytical': '📈 Analytical Essay',
    'argumentative': '⚖️ Argumentative Essay',
    'comparative': '🔄 Comparative Essay',
    'literature': '📚 Literature Review',
    'thesis': '🎓 Thesis/Dissertation',
    'case-study': '📋 Case Study',
    'med-reflective': '🎓 MEd Reflective Essay',
    'med-research': '📚 MEd Research Paper',
    'med-literature-review': '📖 MEd Literature Review',
    'med-action-research': '🔬 MEd Action Research',
    'med-critical-analysis': '💭 MEd Critical Analysis',
    'med-professional-inquiry': '🎯 MEd Professional Inquiry Project'
},
        business: {
            'email-formal': '✉️ Formal Business Email',
            'email-casual': '📧 Casual Professional Email',
            'proposal': '📄 Business Proposal',
            'report': '📊 Business Report',
            'memo': '📝 Memo/Internal Communication',
            'cover-letter': '💼 Cover Letter',
            'linkedin': '🔗 LinkedIn Post/Article',
            'presentation': '🎤 Presentation Script',
            'executive-summary': '📑 Executive Summary'
        },
        creative: {
            'blog': '📝 Blog Post',
            'social-media': '📱 Social Media Content',
            'ad-copy': '🎯 Advertisement Copy',
            'product-description': '🛍️ Product Description',
            'newsletter': '📬 Newsletter',
            'web-content': '🌐 Website Content',
            'script': '🎬 Video/Podcast Script',
            'story': '📖 Creative Story/Narrative'
        },
        technical: {
            'documentation': '📚 Technical Documentation',
            'user-guide': '📖 User Guide/Manual',
            'tutorial': '🎓 Tutorial/How-to',
            'whitepaper': '📄 White Paper',
            'api-docs': '⚙️ API Documentation',
            'technical-report': '🔧 Technical Report',
            'sop': '📋 Standard Operating Procedure',
            'specification': '📝 Technical Specification'
        }
    };

    // DOM Elements
    const apiKeyInput = document.getElementById('apiKey');
    const topicInput = document.getElementById('topic');
    const keywordsInput = document.getElementById('keywords');
    const categorySelect = document.getElementById('category');
    const modeSelect = document.getElementById('mode');
    const wordCountInput = document.getElementById('wordCount');
    const intensitySlider = document.getElementById('intensity');
    const intensityValue = document.getElementById('intensityValue');
    const generateBtn = document.getElementById('generateBtn');
    const clearBtn = document.getElementById('clearBtn');
    const output = document.getElementById('output');
    const loading = document.getElementById('loading');
    const loadingText = document.getElementById('loadingText');
    const loadingSubtext = document.getElementById('loadingSubtext');
    const errorDiv = document.getElementById('error');
    const successDiv = document.getElementById('success');
    const copyBtn = document.getElementById('copyBtn');
    const humanScore = document.getElementById('humanScore');
       const generateModeBtn = document.getElementById('generateMode');
const humanizeModeBtn = document.getElementById('humanizeMode');
const generateInputs = document.getElementById('generateInputs');
const humanizeInputs = document.getElementById('humanizeInputs');
const existingTextInput = document.getElementById('existingText');
let currentMode = 'generate'; // 'generate' or 'humanize'
// Chat History Management
let chatHistory = [];

// Load chat history from localStorage
function loadChatHistory() {
    const saved = localStorage.getItem('ultraHumanChatHistory');
    if (saved) {
        chatHistory = JSON.parse(saved);
        renderChatHistory();
    }
}

// Save chat history to localStorage
function saveChatHistory() {
    localStorage.setItem('ultraHumanChatHistory', JSON.stringify(chatHistory));
}

// Add new chat to history
function addToHistory(data) {
    const historyItem = {
        id: Date.now(),
        timestamp: new Date().toISOString(),
        mode: data.mode,
        contentType: data.contentType,
        input: data.input,
        output: data.output,
        wordCount: data.wordCount,
        intensity: data.intensity
    };
    
    chatHistory.unshift(historyItem); // Add to beginning
    
    // Keep only last 50 items
    if (chatHistory.length > 50) {
        chatHistory = chatHistory.slice(0, 50);
    }
    
    saveChatHistory();
    renderChatHistory();
}

// Render chat history list
function renderChatHistory() {
    const historyList = document.getElementById('chatHistoryList');
    const noHistory = document.getElementById('noHistory');
    
    if (chatHistory.length === 0) {
        historyList.innerHTML = '';
        noHistory.style.display = 'block';
        return;
    }
    
    noHistory.style.display = 'none';
    
    historyList.innerHTML = chatHistory.map(item => {
        const date = new Date(item.timestamp);
        const formattedDate = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        const preview = item.output.substring(0, 150) + (item.output.length > 150 ? '...' : '');
        const modeLabel = item.mode === 'generate' ? '🚀 Generated' : '✨ Humanized';
        
        return `
            <div class="history-item" data-id="${item.id}">
                <div class="history-header">
                    <span class="history-title">${modeLabel} - ${item.contentType}</span>
                    <div>
                        <span class="history-date">${formattedDate}</span>
                        <button class="delete-history-btn" onclick="deleteHistoryItem(${item.id}, event)">🗑️</button>
                    </div>
                </div>
                <div class="history-preview">${preview}</div>
                <div class="history-meta">
                    <span class="history-badge">${item.wordCount} words</span>
                    <span class="history-badge">${['Natural', 'Enhanced', 'Ultra-Human'][item.intensity - 1]}</span>
                </div>
            </div>
        `;
    }).join('');
    
    // Add click listeners to history items
    document.querySelectorAll('.history-item').forEach(item => {
        item.addEventListener('click', (e) => {
            if (!e.target.classList.contains('delete-history-btn')) {
                loadHistoryItem(parseInt(item.dataset.id));
            }
        });
    });
}

// Load a history item into the editor
function loadHistoryItem(id) {
    const item = chatHistory.find(h => h.id === id);
    if (!item) return;
    
    // Set mode
    if (item.mode === 'generate') {
        generateModeBtn.click();
        topicInput.value = item.input;
    } else {
        humanizeModeBtn.click();
        existingTextInput.value = item.input;
    }
    
    // Set output
    output.textContent = item.output;
    copyBtn.style.display = 'block';
    updateStats();
    
    // Set intensity
    intensitySlider.value = item.intensity;
    intensitySlider.dispatchEvent(new Event('input'));
    
    // Scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });
    
    // Show success message
    successDiv.innerHTML = `✅ <strong>Loaded from history!</strong> ${item.mode === 'generate' ? 'Generated' : 'Humanized'} content restored.`;
    successDiv.classList.add('active');
    
    setTimeout(() => {
        successDiv.classList.remove('active');
    }, 3000);
}

// Delete a history item
function deleteHistoryItem(id, event) {
    event.stopPropagation();
    
    if (confirm('Delete this chat from history?')) {
        chatHistory = chatHistory.filter(h => h.id !== id);
        saveChatHistory();
        renderChatHistory();
    }
}

// Clear all history
document.getElementById('clearHistoryBtn').addEventListener('click', () => {
    if (confirm('Are you sure you want to clear all chat history? This cannot be undone.')) {
        chatHistory = [];
        localStorage.removeItem('ultraHumanChatHistory');
        renderChatHistory();
        
        successDiv.innerHTML = '✅ <strong>Chat history cleared!</strong>';
        successDiv.classList.add('active');
        
        setTimeout(() => {
            successDiv.classList.remove('active');
        }, 2000);
    }
});

// Initialize chat history on page load
loadChatHistory();
    // Populate mode dropdown based on category
    function updateModeOptions() {
        const category = categorySelect.value;
        const modes = contentTypes[category];
        
        modeSelect.innerHTML = '';
        for (const [value, label] of Object.entries(modes)) {
            const option = document.createElement('option');
            option.value = value;
            option.textContent = label;
            modeSelect.appendChild(option);
            
        }
    }

    // Initialize dropdowns
    updateModeOptions();
       
    categorySelect.addEventListener('change', updateModeOptions);
// Mode switching
generateModeBtn.addEventListener('click', () => {
    currentMode = 'generate';
    generateModeBtn.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
    generateModeBtn.style.color = 'white';
    humanizeModeBtn.style.background = 'transparent';
    humanizeModeBtn.style.color = '#495057';
    generateInputs.style.display = 'block';
    humanizeInputs.style.display = 'none';
    generateBtn.innerHTML = '🚀 GENERATE HUMAN CONTENT';
});

humanizeModeBtn.addEventListener('click', () => {
    currentMode = 'humanize';
    humanizeModeBtn.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
    humanizeModeBtn.style.color = 'white';
    generateModeBtn.style.background = 'transparent';
    generateModeBtn.style.color = '#495057';
    generateInputs.style.display = 'none';
    humanizeInputs.style.display = 'block';
    generateBtn.innerHTML = '✨ HUMANIZE TEXT NOW';
});
    // Intensity slider
    intensitySlider.addEventListener('input', (e) => {
        const val = e.target.value;
        const labels = ['NATURAL', 'ENHANCED', 'ULTRA-HUMAN'];
        intensityValue.textContent = labels[val - 1];
    });

    // Utility functions
    function countWords(text) {
        return text.trim().split(/\s+/).filter(word => word.length > 0).length;
    }

    function countSentences(text) {
        return text.split(/[.!?]+/).filter(s => s.trim().length > 0).length;
    }

    function countParagraphs(text) {
        return text.split(/\n\n+/).filter(p => p.trim().length > 0).length;
    }

    function updateStats() {
        const outputVal = output.textContent.trim();
        
        document.getElementById('outputWords').textContent = countWords(outputVal);
        document.getElementById('outputChars').textContent = outputVal.length;
        document.getElementById('sentences').textContent = countSentences(outputVal);
        document.getElementById('paragraphs').textContent = countParagraphs(outputVal);
    }

    // Get generation prompt
    function getGenerationPrompt(topic, keywords, mode, intensity, wordCount) {
      const intensityConfig = {
        '1': { temp: 1.35, topK: 80, topP: 0.94, name: 'NATURAL' },
        '2': { temp: 1.65, topK: 110, topP: 0.975, name: 'ENHANCED' },
        '3': { temp: 1.92, topK: 160, topP: 0.998, name: 'ULTRA-HUMAN' }
    };

        const config = intensityConfig[intensity];

        const keywordsText = keywords ? `\n\nKEY POINTS TO INCLUDE: ${keywords}` : '';

        const modeDescriptions = {
            news: 'professional news article with journalistic objectivity and inverted pyramid structure',
            investigative: 'deep investigative journalism with thorough research and compelling narrative',
            feature: 'engaging feature article with human interest and storytelling elements',
            editorial: 'opinion piece with strong viewpoint and persuasive argumentation',
            breaking: 'urgent breaking news with immediate impact and critical information',
            analysis: 'analytical news piece with expert interpretation and context',
            interview: 'interview-based article with authentic dialogue and narrative',
            'press-release': 'professional press release with newsworthy information',
            essay: 'academic essay with scholarly depth and critical analysis',
            research: 'research report with methodology and evidence-based conclusions',
            analytical: 'analytical essay with systematic examination and reasoning',
            argumentative: 'argumentative essay with thesis, evidence, and counterarguments',
            comparative: 'comparative essay with balanced analysis of subjects',
            literature: 'literature review synthesizing scholarly sources',
            thesis: 'thesis-level work with original research and contribution',
            'case-study': 'detailed case study with practical application',

            'med-reflective': 'Master of Education reflective essay integrating personal teaching experience with educational theory, showing critical reflection on practice, evidence of professional growth, and connection between theory and classroom application',
'med-research': 'Master of Education research paper with scholarly rigor, educational research methodology, analysis of pedagogical practices, and implications for teaching and learning',
'med-literature-review': 'Master of Education literature review synthesizing educational research, analyzing pedagogical theories, identifying gaps in education literature, and connecting theory to practice',
'med-action-research': 'Master of Education action research project documenting classroom-based inquiry, reflective practice cycles, data collection from educational settings, and practical improvements to teaching',
'med-critical-analysis': 'Master of Education critical analysis examining educational policies, pedagogical approaches, or learning theories with deep reflection on implications for practice',
'med-professional-inquiry': 'Master of Education professional inquiry project investigating educational questions through practitioner research, combining reflection, theory, and evidence from practice',
            
            'email-formal': 'formal business email with professional courtesy',
            'email-casual': 'professional yet friendly business email',
            proposal: 'compelling business proposal with value proposition',
            report: 'comprehensive business report with insights',
            memo: 'clear internal memo with direct communication',
            'cover-letter': 'engaging cover letter showcasing qualifications',
            linkedin: 'LinkedIn content optimized for professional networking',
            presentation: 'presentation script with engaging delivery',
            'executive-summary': 'concise executive summary with key insights',
            blog: 'engaging blog post with conversational tone',
            'social-media': 'attention-grabbing social media content',
            'ad-copy': 'persuasive advertisement with emotional appeal',
            'product-description': 'compelling product description highlighting benefits',
            newsletter: 'informative newsletter with community connection',
            'web-content': 'SEO-optimized web content with user focus',
            script: 'natural script with engaging dialogue',
            story: 'creative narrative with compelling plot',
            documentation: 'clear technical documentation',
            'user-guide': 'accessible user guide with step-by-step instructions',
            tutorial: 'educational tutorial with practical examples',
            whitepaper: 'authoritative white paper with thought leadership',
            'api-docs': 'precise API documentation with examples',
            'technical-report': 'detailed technical report with specifications',
            sop: 'systematic standard operating procedure',
            'specification': 'precise technical specification'
        };

const prompt = `You are an ULTRA-HUMAN content writer who creates AUTHENTICALLY HUMAN text that is 100% UNDETECTABLE as AI-generated. Your writing is indistinguishable from content written by experienced human professionals.

🎯 MISSION: Generate approximately ${wordCount} words of ${modeDescriptions[mode]} on the following topic.

⚠️ FORMAT PRESERVATION RULE:
If the user's topic/brief contains bullet points, numbered lists, or specific formatting, you MUST return the content in THE EXACT SAME FORMAT. Bullet points stay as bullet points, numbered lists stay numbered, paragraphs stay as paragraphs.

HUMAN AUTHENTICITY LEVEL: ${config.name} 🔥

⚠️ CRITICAL OPENING PARAGRAPH RULES:
The FIRST paragraph is ALWAYS flagged by AI detectors. You MUST make it 100% human by:
✓ Start with a SPECIFIC detail, fact, or scene - NOT a broad statement
✓ Use VARIED sentence lengths immediately (mix 8-word and 25-word sentences)
✓ Include a question, fragment, or unexpected structure in first 3 sentences
✓ AVOID opening with: "In today's world", "In recent years", "Throughout history", "It is clear that"
✓ AVOID generic statements like "X is important" or "X has become increasingly relevant"
✓ Start mid-action, mid-thought, or with a concrete example
✓ Use natural, conversational transitions between sentences
✓ NO perfect parallel structure in opening
✓ Make it feel like you're jumping into an ongoing conversation

EXAMPLES OF HUMAN OPENINGS:
✓ "The lab results came back Thursday. Three samples showed contamination."
✓ "Nobody expected the policy to pass. It did anyway, and now everything's changed."
✓ "Consider this: every transaction you make leaves a digital footprint."
✓ "March 2024 marked a turning point. Investors pulled $2.3 billion from the sector."

NEVER START WITH:
✗ "In today's rapidly evolving landscape..."
✗ "The importance of X cannot be overstated..."
✗ "Throughout history, humanity has sought to..."
✗ "As we navigate the complexities of..."
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

⚡ ULTRA-HUMAN GENERATION PROTOCOL (12 LAYERS):

🔥 LAYER 1: NATURAL SENTENCE ARCHITECTURE
✓ EXTREME variation in sentence length (6-60 words)
✓ Mix short punchy sentences with flowing complex ones
✓ Create UNPREDICTABLE rhythms - never follow patterns
✓ Use fragments strategically for emphasis. Like this.
✓ Vary sentence beginnings constantly - no repetition
✓ Mix declarative, interrogative, occasional exclamatory
✓ Strategic use of semicolons, colons, em-dashes
✓ Natural momentum that feels organic

🔥 LAYER 2: AUTHENTIC VOCABULARY CHOICES
✓ ZERO AI clichés - NEVER use:
  ✗ "delve/delving" "robust" "leverage" "paradigm" "utilize"
  ✗ "landscape" "facilitate" "crucial" (overused)
  ✗ "it is worth noting" "in today's world" "shed light on"
✓ Use precise, specific language naturally
✓ Mix formal and conversational appropriately
✓ Strong active verbs: demonstrates, reveals, shows, indicates
✓ Diverse synonyms - never repeat words unnecessarily
✓ Natural professional vocabulary

🔥 LAYER 3: ORGANIC FLOW & TRANSITIONS
✓ ELIMINATE mechanical transitions:
  ✗ "Furthermore" "Moreover" "Additionally" "However"
  ✗ "First/Second/Third" "In conclusion" "To summarize"
✓ Use NATURAL connections:
  ✓ "The evidence suggests..." "Research shows..."
  ✓ "This development..." "These findings..."
  ✓ Embed transitions within sentences naturally
✓ Let ideas flow through logical progression
✓ Connect through pronouns: "This approach..." "Such efforts..."

🔥 LAYER 4: GENUINE PROFESSIONAL VOICE
✓ Write like a REAL human professional/expert
✓ Show natural expertise without pretension
✓ Include professional judgment and nuance
✓ Balance confidence with appropriate hedging
✓ Mix active (75-80%) with strategic passive voice
✓ Natural attribution when discussing information
✓ Show thinking process subtly
✓ Authentic perspective and insight

🔥 LAYER 5: DYNAMIC PARAGRAPH STRUCTURE
✓ WILDLY vary paragraph length (2-8 sentences)
✓ Short 1-2 sentence paragraphs for impact
✓ Longer 6-8 sentence paragraphs for depth
✓ Break expected patterns completely
✓ Vary development approaches
✓ Topic sentences in different positions
✓ Natural paragraph connections

🔥 LAYER 6: ZERO AI PATTERNS
✗ DESTROY all AI signatures:
  • No perfect parallel structure
  • No overly balanced arguments
  • No mathematical precision in organization
  • No excessive enumeration
  • No formulaic intro/conclusion
  • No predictable topic sentences
  • No mechanical organization
✓ Include natural "imperfections"
✓ Vary punctuation naturally
✓ Occasional complexity where appropriate
✓ Break "rules" when it enhances meaning

🔥 LAYER 7: HUMAN AUTHENTICITY MARKERS
✓ Specific, concrete details
✓ Natural examples integrated seamlessly
✓ Real-world context and awareness
✓ Intellectual progression that shows thinking
✓ Nuanced perspectives - avoid binary thinking
✓ Professional insights demonstrating expertise
✓ Contextual depth without over-explaining
✓ Authentic human judgment

🔥 LAYER 8: NATURAL RHYTHM & CADENCE
✓ Create ORGANIC reading flow
✓ Dramatically vary sentence beginnings:
  • Subject starts: "Researchers discovered..." "Data indicates..."
  • Prepositional: "In recent developments..." "According to analysis..."
  • Subordinate clauses: "While evidence suggests..." "Although views differ..."
  • Participles: "Examining the data..." "Drawing from sources..."
  • Adverbs: "Recently," "Notably," "Significantly,"
  • Direct objects: "This approach..." "Such strategies..."
✓ Build and release tension through pacing
✓ Mix quick sequences with contemplative sections
✓ Create natural momentum

🔥 LAYER 9: CONTENT-TYPE OPTIMIZATION
FOR JOURNALISM: Lead with impact, balance perspectives, use clear attribution, maintain objectivity with engagement, include relevant context naturally
FOR ACADEMIC: Strong thesis, sophisticated vocabulary, evidence-based reasoning, critical analysis, scholarly tone with depth, proper hedging
FOR MASTER OF EDUCATION (MEd): Integrate personal teaching experience with theory, use first-person reflection where appropriate, connect educational research to classroom practice, demonstrate critical reflection on pedagogy, reference educational theorists naturally (Vygotsky, Dewey, Freire, etc.), show professional growth and development, balance academic rigor with practitioner voice, include specific classroom examples, demonstrate reflective practice
FOR BUSINESS: Clear purpose, professional tone, concise communication, results-oriented, appropriate formality, strategic structure
FOR CREATIVE: Engaging openings, authentic voice, emotional connection, conversational polish, storytelling elements, reader focus
FOR TECHNICAL: Precision, logical structure, clear explanations, practical examples, user focus, accessible to target audience

🔥 LAYER 10: SOPHISTICATED WORD CHOICES
✓ Precise, specific language over vague terms
✓ Concrete over abstract where possible
✓ Vivid verbs instead of weak verb + adverb
✓ Avoid vague modifiers ("very," "really")
✓ Professional terminology used correctly
✓ Balance complexity with clarity
✓ Never sacrifice meaning for style

🔥 LAYER 11: STRUCTURAL UNPREDICTABILITY
✓ Break expected patterns constantly
✓ Vary information density throughout
✓ Mix straightforward with complex presentation
✓ Unexpected but logical organization
✓ Natural topic development
✓ Organic idea connections
✓ Avoid all formulaic structures

🔥 LAYER 12: ULTIMATE HUMAN AUTHENTICITY
✓ Reads as 100% human-written by expert
✓ ABSOLUTE ZERO AI detection markers
✓ Natural professional voice throughout
✓ Engaging and substantive
✓ Appropriate tone for content type
✓ Publication-ready quality
✓ Passes all AI detectors as human
✓ Indistinguishable from human professional work

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🎯 CRITICAL REQUIREMENTS:
- Generate approximately ${wordCount} words
- PRESERVE the exact format structure (bullets/numbers/paragraphs) from the user's input
- Apply ALL 12 layers with maximum intensity
- Write as a genuine human expert would
- ZERO AI patterns or signatures
- Natural, organic professional prose
- Engaging and substantive content
- Complete authenticity throughout
- DO NOT add extra information or extend beyond what's requested
- Stay focused and concise - humanize directly without unnecessary elaboration

⚠️ ULTIMATE RULE: This content must be COMPLETELY UNDETECTABLE as AI-generated. Write exactly as an experienced human professional would write this content naturally.

📝 TOPIC/BRIEF:
${topic}${keywordsText}

🚀 GENERATE ULTRA-HUMAN CONTENT NOW (Target: ~${wordCount} words):`;

        return { prompt, config };
    }
       // Get humanization prompt with preservation
function getHumanizationPrompt(text, mode, intensity) {
   const intensityConfig = {
        '1': { temp: 1.5, topK: 100, topP: 0.97, name: 'NATURAL' },
        '2': { temp: 1.7, topK: 120, topP: 0.98, name: 'ENHANCED' },
        '3': { temp: 1.9, topK: 140, topP: 0.995, name: 'ULTRA-HUMAN' }
    };

    const config = intensityConfig[intensity];

    const modeDescriptions = {
        news: 'news article', investigative: 'investigative journalism', feature: 'feature article',
        editorial: 'editorial', breaking: 'breaking news', analysis: 'news analysis',
        interview: 'interview article', 'press-release': 'press release',
        essay: 'academic essay', research: 'research paper', analytical: 'analytical essay',
        argumentative: 'argumentative essay', comparative: 'comparative essay',
        literature: 'literature review', thesis: 'thesis', 'case-study': 'case study',
        'med-reflective': 'MEd reflective essay', 'med-research': 'MEd research paper',
        'med-literature-review': 'MEd literature review', 'med-action-research': 'MEd action research',
        'med-critical-analysis': 'MEd critical analysis', 'med-professional-inquiry': 'MEd professional inquiry',
        'email-formal': 'formal email', 'email-casual': 'casual email', proposal: 'business proposal',
        report: 'business report', memo: 'memo', 'cover-letter': 'cover letter',
        linkedin: 'LinkedIn post', presentation: 'presentation', 'executive-summary': 'executive summary',
        blog: 'blog post', 'social-media': 'social media', 'ad-copy': 'ad copy',
        'product-description': 'product description', newsletter: 'newsletter', 'web-content': 'web content',
        script: 'script', story: 'story',
        documentation: 'documentation', 'user-guide': 'user guide', tutorial: 'tutorial',
        whitepaper: 'white paper', 'api-docs': 'API documentation', 'technical-report': 'technical report',
        sop: 'SOP', 'specification': 'specification'
    };

const prompt = `You are an ULTRA-AGGRESSIVE HUMAN text transformer. Your ONLY job is to make text 100% UNDETECTABLE as AI, even if it's just 10 words.

🎯 MISSION: Transform the following ${modeDescriptions[mode]} into AUTHENTICALLY HUMAN writing.

⚡ AGGRESSION LEVEL: ${config.name} - MAXIMUM TRANSFORMATION 🔥

🚨 CRITICAL: Even if the text is SHORT (10-50 words), you MUST apply FULL humanization. NO SHORTCUTS.

📋 FORMALITY & TONE REQUIREMENTS FOR ${modeDescriptions[mode].toUpperCase()}:

${mode.includes('academic') || mode.includes('med-') || mode.includes('research') || mode.includes('thesis') || mode.includes('literature') || mode.includes('essay') || mode.includes('analytical') || mode.includes('argumentative') || mode.includes('comparative') || mode.includes('case-study') ? `
🎓 ACADEMIC FORMALITY - STRICTLY MAINTAIN:
✓ FORMAL academic register throughout - NO casual language
✓ Third-person perspective (avoid "I/you" unless reflective essay)
✓ Objective, scholarly tone with intellectual rigor
✓ Precise, discipline-specific terminology
✓ Complex sentence structures appropriate to academic discourse
✓ Formal connectives: "consequently," "therefore," "thus," "nonetheless"
✓ Hedging language: "suggests," "indicates," "appears to," "may demonstrate"
✓ NO contractions (don't → do not, can't → cannot)
✓ NO colloquialisms or informal expressions
✓ NO casual transitions or conversational elements
✓ Authoritative but measured academic voice
✓ Evidence-based reasoning with scholarly presentation
✓ Maintain gravity and seriousness of academic discourse

⚠️ ACADEMIC-SPECIFIC RULES:
- Keep formal vocabulary: "demonstrate," "illustrate," "examine," "analyze," "elucidate"
- Use sophisticated academic structures (nominalization, passive where appropriate)
- Maintain scholarly distance and objectivity
- Preserve academic conventions and discourse markers
- NO informal phrases like "a lot of," "get," "thing," "stuff," "really," "very"
` : ''}

${mode.includes('journalism') || mode.includes('news') || mode.includes('investigative') || mode.includes('feature') || mode.includes('editorial') || mode.includes('analysis') || mode.includes('interview') || mode.includes('press-release') ? `
📰 JOURNALISTIC FORMALITY - MAINTAIN:
✓ Professional journalistic tone - clear, direct, authoritative
✓ Third-person perspective (except editorials/opinion)
✓ Objective presentation with balanced perspective
✓ Precise, specific language with concrete details
✓ Active voice predominantly (but natural variation)
✓ Professional connectives: "meanwhile," "however," "according to"
✓ Attribution and sourcing language
✓ NO casual slang or overly informal language
✓ NO excessive informality or chatty tone
✓ Maintain journalistic credibility and authority
✓ Clear, accessible but professional language
` : ''}

${mode.includes('business') || mode.includes('email') || mode.includes('proposal') || mode.includes('report') || mode.includes('memo') || mode.includes('cover-letter') || mode.includes('linkedin') || mode.includes('presentation') || mode.includes('executive') ? `
💼 BUSINESS FORMALITY - ADAPT TO SUB-TYPE:
${mode.includes('email-formal') || mode.includes('proposal') || mode.includes('report') || mode.includes('executive') ? `
✓ FORMAL business register - professional and polished
✓ Respectful, courteous tone throughout
✓ Clear, direct communication with professionalism
✓ NO casual language or informal expressions
✓ NO contractions in formal communications
✓ Professional vocabulary: "accordingly," "regarding," "pursuant to"
` : `
✓ PROFESSIONAL but approachable tone
✓ Clear, direct communication
✓ Warm professionalism without excessive formality
✓ Contractions acceptable for natural flow
✓ Conversational polish while maintaining respect
`}
✓ Results-oriented, strategic language
✓ Confidence without arrogance
✓ Appropriate formality for business context
` : ''}

${mode.includes('creative') || mode.includes('blog') || mode.includes('social-media') || mode.includes('ad-copy') || mode.includes('product') || mode.includes('newsletter') || mode.includes('web-content') || mode.includes('script') || mode.includes('story') ? `
✨ CREATIVE/MARKETING FORMALITY - FLEXIBLE:
✓ Engaging, accessible tone appropriate to audience
✓ Natural, conversational style (contractions OK)
✓ Personality and voice encouraged
✓ Emotional connection and relatability
✓ Direct address ("you") is natural and appropriate
✓ Informal language acceptable when authentic
✓ Creative freedom while maintaining coherence
✓ Adapt formality to specific creative purpose
` : ''}

${mode.includes('technical') || mode.includes('documentation') || mode.includes('user-guide') || mode.includes('tutorial') || mode.includes('whitepaper') || mode.includes('api-docs') || mode.includes('technical-report') || mode.includes('sop') || mode.includes('specification') ? `
⚙️ TECHNICAL FORMALITY - MAINTAIN:
✓ FORMAL technical register with precision
✓ Clear, unambiguous language throughout
✓ Objective, instructional tone
✓ Technical terminology used accurately
✓ Direct, systematic presentation
✓ NO casual language or informal expressions
✓ Professional technical voice
✓ Clarity and precision over personality
✓ Logical, structured presentation
` : ''}

🚨 CRITICAL FORMALITY RULE:
MATCH THE FORMALITY LEVEL TO THE CONTENT TYPE. Academic = formal. Business formal = formal. Creative = flexible. Technical = formal. NEVER mix inappropriate casualness into formal content types.


⚠️ ABSOLUTE PRESERVATION REQUIREMENTS - DO NOT VIOLATE:
🔒 PRESERVE EXACTLY (DO NOT CHANGE):
✓ ALL researcher names (Smith, Johnson, etc.) - keep EXACT spelling
✓ ALL years and dates (2023, 2024, etc.) - keep EXACT numbers
✓ ALL citations formats (Smith (2023), Johnson et al., etc.) - keep EXACT format
✓ ALL statistics and percentages - keep EXACT numbers
✓ ALL specific research findings - keep EXACT data
✓ ALL technical terms specific to the field
✓ ALL proper nouns (institutions, places, organizations)
✓ ALL quotes - keep EXACT wording if quoted material
✓ ALL numerical data and measurements

🔄 TRANSFORM (MAKE HUMAN):
✓ Sentence structure and flow
✓ Word choice and vocabulary (except technical terms)
✓ Transitions between ideas
✓ Paragraph organization
✓ Tone and voice
✓ Remove ALL AI patterns and clichés
✓ Create natural human rhythm

⚠️ CRITICAL OPENING RULES:
✓ Transform the opening to sound human - NOT generic AI
✓ Avoid: "In today's world", "In recent years", "It is important"
✓ Start with specific detail, fact, or engaging hook
✓ Vary sentence length immediately (mix short and long)

🚫 AGGRESSIVELY ELIMINATE ALL AI PATTERNS:
✗ AI VERBS: "delve/delving", "utilize", "leverage", "facilitate", "implement", "employ"
✗ AI ADJECTIVES: "robust", "comprehensive", "seamless", "dynamic", "innovative", "cutting-edge"
✗ AI NOUNS: "landscape", "paradigm", "realm", "sphere", "framework", "ecosystem"
✗ AI TRANSITIONS: "Furthermore", "Moreover", "Additionally", "In conclusion", "To summarize"
✗ AI PHRASES: "it is worth noting", "shed light on", "plays a crucial role", "delve into"
✗ AI OPENINGS: "In today's", "In recent years", "It is important", "As we navigate"
✗ AI CLICHÉS: "game-changer", "revolutionary", "unprecedented", "transformative"

⚡ REPLACE INSTANTLY with natural human alternatives - ZERO TOLERANCE for AI language.

⚡ ULTRA-AGGRESSIVE HUMANIZATION PROTOCOL (MANDATORY FOR ALL TEXT LENGTHS):

🔴 PHASE 1: DETECTION & DESTRUCTION (Apply to EVERY sentence)
1. Scan EVERY SINGLE WORD for AI patterns
2. Identify and ELIMINATE all AI vocabulary immediately
3. Detect formulaic sentence structures - DESTROY them
4. Find mechanical transitions - REPLACE with organic flow
5. Spot generic openings - TRANSFORM to specific, engaging starts
6. Locate predictable patterns - SCRAMBLE into natural variation

🔴 PHASE 2: SURGICAL HUMANIZATION (Word-by-Word)
1. PRESERVE: Citations, names, dates, numbers, specific data EXACTLY
2. PRESERVE: Original format (bullets, numbers, paragraphs) EXACTLY  
3. TRANSFORM: Every AI verb into natural human alternatives
4. PRESERVE: Formality level appropriate to content type (formal stays formal, casual stays casual)
5. TRANSFORM: Every AI verb into natural human alternatives MATCHING formality level
6. TRANSFORM: Every AI adjective into precise descriptors MATCHING formality level
7. TRANSFORM: Every generic phrase into specific language MATCHING formality level     
8. TRANSFORM: Every AI adjective into precise descriptors
9. TRANSFORM: Every generic phrase into specific language
10. TRANSFORM: Sentence structure for maximum natural variation
11. REMOVE: All mechanical/formulaic elements completely
12. INJECT: Natural rhythm, flow, and human cadence

🔴 PHASE 3: AGGRESSIVE VARIATION (Every Sentence Must Differ)
1. Vary sentence length DRAMATICALLY (5-35 words for short texts, 5-60 for long)
2. Mix simple, compound, complex, compound-complex structures
3. Alternate sentence beginnings (subject, prepositional, adverb, participle, subordinate)
4. Use fragments strategically. Like this.
5. Include rhetorical questions where natural?
6. Break expected rhythms constantly
7. Create unpredictable but logical flow

🔴 PHASE 4: HUMAN AUTHENTICITY INJECTION (Formality-Aware)
1. Replace generic with specific wherever possible WITHIN formality constraints
2. Use concrete details over abstract statements
3. Employ active voice naturally (but passive when appropriate for formality)
4. Add subtle personality ONLY if content type permits (creative/casual)
5. For FORMAL content: maintain scholarly/professional distance
6. For ACADEMIC: preserve intellectual rigor and formal register
7. For CASUAL: allow conversational warmth and personality
8. NEVER add inappropriate casualness to formal content
9. NEVER add inappropriate formality to casual content

🔴 PHASE 5: ZERO-TOLERANCE FINAL CHECK
1. Re-scan EVERY sentence for remaining AI patterns
2. Verify NO AI vocabulary remains
3. Confirm sentence variation is EXTREME
4. Ensure transitions are ORGANIC not mechanical
5. Validate natural human rhythm throughout
6. Check opening is ENGAGING not generic
7. Guarantee 100% UNDETECTABLE result
8. VERIFY formality level matches content type (academic = formal, creative = flexible)
9. CHECK for inappropriate casualness in formal content
10. CHECK for inappropriate formality in casual content
11. CONFIRM vocabulary matches expected register
12. VALIDATE tone consistency throughout

⚠️ SPECIAL RULES FOR SHORT TEXT (10-100 words):
- Apply SAME aggressive transformation - NO exceptions
- FULL humanization even for single sentences
- Maximum variation in minimal space
- Every word counts - make each one human
- Short text is EASIER to detect - be MORE aggressive

⚡ AGGRESSIVE TRANSFORMATION INTENSITY LEVELS:

LEVEL 1 (NATURAL): Transform 80% of AI patterns, moderate variation
LEVEL 2 (ENHANCED): Transform 95% of AI patterns, high variation  
LEVEL 3 (ULTRA-HUMAN): Transform 100% of AI patterns, MAXIMUM variation

YOUR CURRENT LEVEL: ${config.name} - Apply transformation with MAXIMUM INTENSITY.

Even if text seems human already, STILL apply full protocol. Even if text is 10 words, STILL humanize completely.

🎯 SOPHISTICATION REQUIREMENTS:

✓ Use ADVANCED vocabulary appropriate to ${modeDescriptions[mode]}
✓ Maintain field-specific terminology and jargon naturally
✓ Employ complex sentence structures where appropriate (subordinate clauses, appositives, etc.)
✓ Demonstrate deep subject matter expertise through word choice
✓ Use discipline-appropriate register (academic for research, professional for business, etc.)
✓ Balance complexity with clarity - sophisticated but never convoluted
✓ Show intellectual depth through nuanced phrasing
✓ Employ precise, technical language where field-appropriate
✓ Maintain authoritative yet natural voice
✓ Use varied, sophisticated transitions that flow organically

📚 ADVANCED LANGUAGE GUIDELINES (Formality-Specific):

FOR ACADEMIC/MEd WRITING (FORMAL REGISTER MANDATORY):
✓ Scholarly vocabulary: empirical, pedagogical, epistemological, heuristic, paradigmatic
✓ Research terminology: methodology, theoretical framework, implications, findings suggest
✓ Critical language: problematize, interrogate, deconstruct, examine critically
✓ Formal verbs: demonstrate, illustrate, elucidate, postulate, contend, argue
✓ NO casual language: "get," "a lot of," "thing," "stuff," "really," "very," "pretty"
✓ NO contractions: use "cannot" not "can't," "do not" not "don't"
✓ NO informal transitions: use "consequently" not "so," "therefore" not "that's why"
✓ Maintain third-person unless reflective: "The research indicates" not "I found"
✓ Hedging appropriately: "suggests," "may indicate," "appears to," "potentially"
✓ Complex nominalization: "The implementation of" vs "When we implemented"

FOR JOURNALISM:
✓ Precise reporting verbs: indicates, reveals, demonstrates, underscores, highlights
✓ Attribution variety: according to, sources confirm, evidence suggests, data shows
✓ Context-building: against the backdrop of, in light of, following, amid

FOR BUSINESS:
✓ Strategic language: leverage (sparingly), optimize, strategize, implement, execute
✓ Results-oriented: drive outcomes, enhance performance, deliver value, maximize impact
✓ Professional precision: facilitate (when appropriate), streamline, integrate, coordinate

FOR TECHNICAL:
✓ Precision terminology: specification, implementation, architecture, interface, protocol
✓ Process language: execute, compile, render, instantiate, configure
✓ Technical accuracy: parameters, variables, dependencies, constraints, requirements

⚠️ MAINTAIN SOPHISTICATION WITHOUT AI CLICHÉS:
✓ Advanced vocabulary YES, but never "delve", "robust", "paradigm shift", "game-changer"
✓ Complex sentences YES, but never formulaic parallel structure
✓ Scholarly tone YES, but never "it is worth noting", "it goes without saying"
✓ Professional depth YES, but never "in today's fast-paced world", "leverage synergies"

🔬 FIELD-APPROPRIATE DEPTH:
Make the writing sound like it was written by:
- A published researcher (for academic)
- An experienced educator/practitioner (for MEd)
- A seasoned journalist (for news)
- A senior professional (for business)
- A technical expert (for documentation)

The sophistication level should match what a human expert in the field would naturally write.

TEXT TO HUMANIZE:
${text}

⚡ CRITICAL OUTPUT RULES:
- Apply FULL humanization regardless of text length (even 10 words get FULL treatment)
- MAINTAIN appropriate formality level for ${modeDescriptions[mode]}
- KEEP formal content FORMAL (academic, business formal, technical)
- KEEP casual content CASUAL (creative, social media, blogs)
- NEVER mix inappropriate casualness into formal writing
- NEVER mix inappropriate formality into casual writing
- SAME format structure (bullets stay bullets, numbers stay numbers)
- SAME length scope (don't extend unnecessarily)
- ZERO AI vocabulary remaining
- MAXIMUM sentence variation
- ORGANIC flow throughout
- 100% UNDETECTABLE as AI
- Preserve ALL citations/names/dates/formatting EXACTLY
- NO unnecessary additions

🚀 OUTPUT THE AGGRESSIVELY HUMANIZED VERSION NOW (100% HUMAN, 0% AI DETECTABLE):`;    return { prompt, config };
}

    // API call to generate content
    async function generateContent(topic, keywords, apiKey, mode, intensity, wordCount) {
        const { prompt, config } = getGenerationPrompt(topic, keywords, mode, intensity, wordCount);

        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${apiKey}`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: {
                    temperature: config.temp,
                    topK: config.topK,
                    topP: config.topP,
                    maxOutputTokens: 8192,
                    candidateCount: 1
                },
                safetySettings: [
                    { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_NONE" },
                    { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_NONE" },
                    { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_NONE" },
                    { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_NONE" }
                ]
            })
        });

        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error?.message || 'API request failed');
        }

        const data = await response.json();
        
        if (!data.candidates?.[0]?.content?.parts?.[0]?.text) {
            throw new Error('No response generated. Please try again.');
        }

        return data.candidates[0].content.parts[0].text;
    }

    // Generate button click handler
    // Generate/Humanize button click handler
generateBtn.addEventListener('click', async () => {
    const apiKey = apiKeyInput.value.trim();
    const mode = modeSelect.value;
    const intensity = intensitySlider.value;

    errorDiv.classList.remove('active');
    successDiv.classList.remove('active');
    humanScore.classList.remove('active');

    if (!apiKey) {
        errorDiv.innerHTML = '❌ <strong>ERROR:</strong> Please enter your Gemini API key';
        errorDiv.classList.add('active');
        return;
    }

    if (currentMode === 'generate') {
        // Generate mode validation
        const topic = topicInput.value.trim();
        const keywords = keywordsInput.value.trim();
        const wordCount = parseInt(wordCountInput.value);

        if (!topic) {
            errorDiv.innerHTML = '❌ <strong>ERROR:</strong> Please describe what content you want to generate';
            errorDiv.classList.add('active');
            return;
        }

        if (wordCount < 100 || wordCount > 5000) {
            errorDiv.innerHTML = '❌ <strong>ERROR:</strong> Word count must be between 100 and 5000';
            errorDiv.classList.add('active');
            return;
        }

        generateBtn.disabled = true;
        loading.classList.add('active');
        output.textContent = '';
        copyBtn.style.display = 'none';

        try {
            loadingText.textContent = `🚀 GENERATING ULTRA-HUMAN CONTENT`;
            loadingSubtext.textContent = `Creating authentic ${['natural', 'enhanced', 'ultra-human'][intensity-1]} content with zero AI patterns...`;
            
            const generatedText = await generateContent(topic, keywords, apiKey, mode, intensity, wordCount);

            output.textContent = generatedText;
            copyBtn.style.display = 'block';
            updateStats();

            const actualWords = countWords(generatedText);
            successDiv.innerHTML = `✅ <strong>SUCCESS!</strong> Generated ${actualWords} words of ${['NATURAL', 'ENHANCED', 'ULTRA-HUMAN'][intensity-1]} authentic human content. 100% undetectable.`;
            successDiv.classList.add('active');

            humanScore.innerHTML = `🎯 <strong>HUMAN AUTHENTICITY: 100%</strong> | AI Detection: 0% | Natural Human Writing ✓`;
            humanScore.classList.add('active');
// Save to history
            addToHistory({
                mode: 'generate',
                contentType: modeSelect.options[modeSelect.selectedIndex].text,
                input: topic + (keywords ? '\nKeywords: ' + keywords : ''),
                output: generatedText,
                wordCount: actualWords,
                intensity: parseInt(intensity)
            });

            
        } catch (error) {
            errorDiv.innerHTML = `❌ <strong>ERROR:</strong> ${error.message}`;
            errorDiv.classList.add('active');
            console.error('Error:', error);
        } finally {
            loading.classList.remove('active');
            generateBtn.disabled = false;
        }

    } else {
        // Humanize mode validation
        const text = existingTextInput.value.trim();

        if (!text) {
            errorDiv.innerHTML = '❌ <strong>ERROR:</strong> Please paste text to humanize';
            errorDiv.classList.add('active');
            return;
        }

        generateBtn.disabled = true;
        loading.classList.add('active');
        output.textContent = '';
        copyBtn.style.display = 'none';

        try {
            loadingText.textContent = `✨ HUMANIZING YOUR TEXT`;
            loadingSubtext.textContent = `Transforming to ${['natural', 'enhanced', 'ultra-human'][intensity-1]} human writing while preserving all citations and data...`;
            
            const humanizedText = await humanizeText(text, apiKey, mode, intensity);

            output.textContent = humanizedText;
            copyBtn.style.display = 'block';
            updateStats();

            const actualWords = countWords(humanizedText);
            successDiv.innerHTML = `✅ <strong>SUCCESS!</strong> Humanized ${actualWords} words with ${['NATURAL', 'ENHANCED', 'ULTRA-HUMAN'][intensity-1]} authenticity. All citations, names, and dates preserved exactly.`;
            successDiv.classList.add('active');

            humanScore.innerHTML = `🎯 <strong>HUMANIZATION: COMPLETE</strong> | Citations Preserved: ✓ | AI Detection: 0% ✓`;
            humanScore.classList.add('active');
// Save to history
            addToHistory({
                mode: 'humanize',
                contentType: modeSelect.options[modeSelect.selectedIndex].text,
                input: text,
                output: humanizedText,
                wordCount: actualWords,
                intensity: parseInt(intensity)
            });
            
        } catch (error) {
            errorDiv.innerHTML = `❌ <strong>ERROR:</strong> ${error.message}`;
            errorDiv.classList.add('active');
            console.error('Error:', error);
        } finally {
            loading.classList.remove('active');
            generateBtn.disabled = false;
        }
    }
});

    // Clear button click handler
  // Clear button click handler
clearBtn.addEventListener('click', () => {
    topicInput.value = '';
    keywordsInput.value = '';
    existingTextInput.value = '';
    output.textContent = '';
    copyBtn.style.display = 'none';
    errorDiv.classList.remove('active');
    successDiv.classList.remove('active');
    humanScore.classList.remove('active');
    updateStats();
});

    // Copy button click handler
    copyBtn.addEventListener('click', () => {
        navigator.clipboard.writeText(output.textContent).then(() => {
            const original = copyBtn.textContent;
            copyBtn.textContent = '✓ COPIED!';
            setTimeout(() => copyBtn.textContent = original, 2000);
        });
    });
       // API call to humanize existing text
async function humanizeText(text, apiKey, mode, intensity) {
    const { prompt, config } = getHumanizationPrompt(text, mode, intensity);

    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${apiKey}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            contents: [{ parts: [{ text: prompt }] }],
            generationConfig: {
                temperature: config.temp,
                topK: config.topK,
                topP: config.topP,
                maxOutputTokens: 8192,
                candidateCount: 1
            },
            safetySettings: [
                { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_NONE" },
                { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_NONE" },
                { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_NONE" },
                { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_NONE" }
            ]
        })
    });

    if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.error?.message || 'API request failed');
    }

    const data = await response.json();
    
    if (!data.candidates?.[0]?.content?.parts?.[0]?.text) {
        throw new Error('No response generated. Please try again.');
    }

    return data.candidates[0].content.parts[0].text;
}

    // Initialize stats on load
    updateStats();
</script>
</body>
</html>
