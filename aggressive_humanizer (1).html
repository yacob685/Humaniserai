
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultra-Human Content Generator Pro</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background: #f3f4f6;
    min-height: 100vh;
    color: #2c3e50;
}

header {
    background-color: white;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
}

nav {
    max-width: 1400px;
    margin: 0 auto;
    padding: 1rem 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

nav a.nav-brand {
    font-size: 1.5rem;
    font-weight: 700;
    color: #4f46e5;
    text-decoration: none;
}

.nav-links {
    display: flex;
    gap: 1.5rem;
    align-items: center;
}

.nav-links a {
    color: #6b7280;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s;
}

.nav-links a:hover {
    color: #4f46e5;
}

.container {
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    max-width: 1400px;
    width: 90%;
    margin: 2rem auto;
    padding: 40px;
    border: 1px solid #e0e0e0;
}

h1 {
    text-align: center;
    color: #2c3e50;
    margin-bottom: 8px;
    font-size: 2.2em;
    font-weight: 700;
}

.subtitle {
    text-align: center;
    color: #6c757d;
    margin-bottom: 12px;
    font-size: 1.1em;
    font-weight: 400;
}

.power-badge {
    text-align: center;
    background: linear-gradient(135deg, #e74c3c, #c0392b);
    color: white;
    padding: 12px 28px;
    border-radius: 25px;
    display: block;
    width: fit-content;
    margin: 0 auto 30px auto;
    font-weight: 600;
    font-size: 0.95em;
    box-shadow: 0 2px 10px rgba(231, 76, 60, 0.3);
}

.api-section {
    margin-bottom: 25px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 12px;
    border: 1px solid #dee2e6;
}

.api-section label {
    color: #495057 !important;
}

.input-group {
    margin-bottom: 20px;
}

label {
    display: block;
    margin-bottom: 8px;
    color: #495057;
    font-weight: 600;
    font-size: 0.95em;
}

input[type="text"],
textarea,
select,
input[type="number"] {
    width: 100%;
    padding: 14px;
    border: 2px solid #dee2e6;
    border-radius: 8px;
    font-size: 15px;
    transition: all 0.3s;
    font-family: inherit;
    background: white;
}

select {
    cursor: pointer;
}

input[type="text"]:focus,
textarea:focus,
select:focus,
input[type="number"]:focus {
    outline: none;
    border-color: #e74c3c;
    box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
}

textarea {
    resize: vertical;
    min-height: 120px;
    line-height: 1.6;
}

.controls-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 18px;
    margin-bottom: 25px;
}

.button-container {
    display: flex;
    gap: 15px;
    margin-bottom: 25px;
}

button {
    flex: 1;
    padding: 16px 32px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
}

.generate-btn {
    background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
    color: white;
    box-shadow: 0 2px 10px rgba(231, 76, 60, 0.3);
}

.generate-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(231, 76, 60, 0.4);
}

.generate-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.clear-btn {
    background: linear-gradient(135deg, #6c757d, #5a6268);
    color: white;
}

.clear-btn:hover {
    background: linear-gradient(135deg, #5a6268, #495057);
    transform: translateY(-2px);
}

.output-section {
    background: #f8f9fa;
    padding: 25px;
    border-radius: 12px;
    min-height: 400px;
    position: relative;
    border: 2px solid #dee2e6;
}

.output-content {
    white-space: pre-wrap;
    line-height: 1.8;
    color: #2c3e50;
    font-size: 15px;
}

.loading {
    display: none;
    text-align: center;
    padding: 60px 20px;
}

.loading.active {
    display: block;
}

.spinner {
    border: 5px solid #e9ecef;
    border-top: 5px solid #e74c3c;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 0.8s linear infinite;
    margin: 0 auto 20px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-text {
    color: #e74c3c;
    font-weight: 600;
    font-size: 1.1em;
    margin-bottom: 8px;
}

.loading-subtext {
    color: #6c757d;
    font-size: 0.95em;
    font-weight: 400;
}

.copy-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    padding: 10px 20px;
    background: linear-gradient(135deg, #28a745, #218838);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.3s;
}

.copy-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 2px 12px rgba(40, 167, 69, 0.4);
}

.error {
    background: linear-gradient(135deg, #dc3545, #c82333);
    color: white;
    padding: 16px;
    border-radius: 8px;
    margin-bottom: 20px;
    display: none;
    border: 1px solid #bd2130;
    font-weight: 500;
}

.error.active {
    display: block;
}

.success {
    background: linear-gradient(135deg, #28a745, #218838);
    color: white;
    padding: 16px;
    border-radius: 8px;
    margin-bottom: 20px;
    display: none;
    border: 1px solid #1e7e34;
    font-weight: 500;
}

.success.active {
    display: block;
}

.stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 15px;
    margin-top: 30px;
    padding-top: 30px;
    border-top: 2px solid #dee2e6;
}

.stat-item {
    text-align: center;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 10px;
    border: 1px solid #dee2e6;
    transition: all 0.3s;
}

.stat-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    border-color: #e74c3c;
}

.stat-value {
    font-size: 28px;
    font-weight: 700;
    color: #e74c3c;
}

.stat-label {
    color: #6c757d;
    font-size: 0.85em;
    margin-top: 8px;
    font-weight: 500;
}

.human-score {
    text-align: center;
    margin-top: 20px;
    padding: 18px;
    background: linear-gradient(135deg, #28a745, #218838);
    color: white;
    border-radius: 10px;
    font-weight: 600;
    font-size: 1.05em;
    display: none;
    box-shadow: 0 2px 12px rgba(40, 167, 69, 0.3);
    border: 1px solid #1e7e34;
}

.human-score.active {
    display: block;
}

.intensity-slider {
    margin-bottom: 25px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 12px;
    border: 1px solid #dee2e6;
}

.slider-container {
    margin-top: 12px;
}

input[type="range"] {
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: linear-gradient(to right, #e74c3c, #c0392b);
    outline: none;
    -webkit-appearance: none;
}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #e74c3c;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(231, 76, 60, 0.4);
}

input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #e74c3c;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(231, 76, 60, 0.4);
    border: none;
}

.intensity-label {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
    font-weight: 500;
    color: #495057;
    font-size: 0.9em;
}

.feature-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 25px;
    justify-content: center;
}

.badge {
    background: #e9ecef;
    color: #495057;
    padding: 8px 16px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.8em;
    border: 1px solid #dee2e6;
}

@media (max-width: 768px) {
    .nav-links {
        display: none;
    }
    
    .container {
        width: 95%;
        padding: 20px;
    }
    
    h1 {
        font-size: 1.8em;
    }
}

        .history-item {
    background: white;
    padding: 15px;
    margin-bottom: 12px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
    cursor: pointer;
    transition: all 0.3s;
}

.history-item:hover {
    border-color: #e74c3c;
    box-shadow: 0 2px 8px rgba(231, 76, 60, 0.2);
    transform: translateX(5px);
}

.history-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.history-title {
    font-weight: 600;
    color: #2c3e50;
    font-size: 0.95em;
}

.history-date {
    font-size: 0.8em;
    color: #6c757d;
}

.history-preview {
    color: #495057;
    font-size: 0.85em;
    line-height: 1.4;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.history-meta {
    display: flex;
    gap: 15px;
    margin-top: 8px;
    font-size: 0.75em;
    color: #6c757d;
}

.history-badge {
    background: #e9ecef;
    padding: 3px 8px;
    border-radius: 4px;
    font-weight: 600;
}

.delete-history-btn {
    padding: 4px 10px;
    background: #dc3545;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.75em;
    font-weight: 600;
    margin-left: 10px;
}

.delete-history-btn:hover {
    background: #c82333;
}
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="nav-brand">Web Service Hub</a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="index.html#tools">All Tools</a>
            </div>
        </nav>
    </header>
    
    <div class="container">
        <h1>ğŸš€ ULTRA-HUMAN CONTENT GENERATOR PRO</h1>
        <p class="subtitle">Generate Authentically Human Content from Scratch - Zero AI Detection</p>
        <div class="power-badge">ğŸ”¥ DIRECT HUMAN GENERATION | 100% UNDETECTABLE</div>

        <div class="mode-toggle" style="text-align: center; margin-bottom: 25px;">
    <label style="font-weight: 600; color: #495057; margin-bottom: 10px; display: block;">ğŸ¯ OPERATION MODE:</label>
    <div style="display: inline-flex; background: #e9ecef; border-radius: 10px; padding: 4px;">
        <button type="button" id="generateMode" class="mode-btn active" style="padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; background: linear-gradient(135deg, #e74c3c, #c0392b); color: white;">
            ğŸš€ Generate New Content
        </button>
        <button type="button" id="humanizeMode" class="mode-btn" style="padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; background: transparent; color: #495057;">
            âœ¨ Humanize Existing Text
        </button>
                <button type="button" id="enhanceMode" class="mode-btn" style="padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; background: transparent; color: #495057;">
    ğŸ¯ Enhance & Complete Content
</button>
    </div>
</div>

        <!-- DETECTION MODE TOGGLE - Add this after the mode-toggle div -->
<div class="detection-mode-toggle" style="text-align: center; margin-bottom: 25px; margin-top: 15px;">
    <label style="font-weight: 600; color: #495057; margin-bottom: 10px; display: block;">ğŸ¤– DETECTION MODE:</label>
    <div style="display: inline-flex; background: #e9ecef; border-radius: 10px; padding: 4px;">
        <button type="button" id="autoDetectBtn" class="detection-btn" style="padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; background: linear-gradient(135deg, #28a745, #218838); color: white;">
            âœ¨ Auto-Detect
        </button>
        <button type="button" id="manualSelectBtn" class="detection-btn" style="padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; background: transparent; color: #495057;">
            ğŸ¯ Manual Select
        </button>

    </div>
    <p style="margin-top: 10px; font-size: 0.85em; color: #6c757d;">
        <span id="detectionModeDesc">AI automatically detects subject, question type, and format</span>
    </p>
</div>
        <div class="feature-badges">
            <span class="badge">ğŸ¯ NATIVE HUMAN GENERATION</span>
            <span class="badge">âš¡ ZERO AI PATTERNS</span>
            <span class="badge">ğŸ“° ALL CONTENT TYPES</span>
            <span class="badge">ğŸ“ ACADEMIC GRADE</span>
            <span class="badge">ğŸ’¼ PROFESSIONAL READY</span>
            <span class="badge">ğŸš€ MAXIMUM AUTHENTICITY</span>
        </div>

        <div class="api-section" style="display: block;">
            <div class="input-group">
<label for="apiKey">
    ğŸ”‘ Enter Your Gemini API Key: 
    <a href="https://aistudio.google.com/apikey" 
       target="_blank" 
       style="display: inline-block; margin-left: 10px; padding: 6px 12px; background: linear-gradient(135deg, #4f46e5, #4338ca); color: white; text-decoration: none; border-radius: 6px; font-size: 0.85em; font-weight: 600; transition: transform 0.2s;"
       onmouseover="this.style.transform='translateY(-2px)'"
       onmouseout="this.style.transform='translateY(0)'">
        ğŸ”— Get API Key For Free
    </a>
</label>                <div style="display: block;">
                    <input type="text" id="apiKey" value="">
                </div>
            </div>
        </div>

        <div class="intensity-slider">
            <label>ğŸ”¥ HUMAN AUTHENTICITY LEVEL:</label>
            <div class="slider-container">
                <input type="range" id="intensity" min="1" max="3" value="3" step="1">
                <div class="intensity-label">
                    <span>Natural</span>
                    <span id="intensityValue">ULTRA-HUMAN</span>
                    <span>Maximum</span>
                </div>
            </div>
        </div>

        <div class="controls-grid">
            <div class="input-group">
                <label for="category">ğŸ¯ Content Category:</label>
                <select id="category">
                    <option value="journalism">ğŸ“° Journalism & News</option>
                    <option value="academic">ğŸ“ Academic & Research</option>
                    <option value="business">ğŸ’¼ Business & Professional</option>
                    <option value="creative">âœ¨ Creative & Marketing</option>
                    <option value="technical">âš™ï¸ Technical & Documentation</option>
                </select>
            </div>
            <div class="input-group">
                <label for="mode">ğŸ“š Specific Type:</label>
                <select id="mode">
                    <!-- Options will be populated based on category -->
                </select>
            </div>
            <div class="input-group">
                <label for="wordCount">ğŸ“Š Target Word Count:</label>
                <input type="number" id="wordCount" min="100" max="5000" value="800" step="50">
            </div>
        </div>

        <div class="error" id="error"></div>
        <div class="success" id="success"></div>
        <div class="info-restored" id="infoRestored" style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; padding: 16px; border-radius: 8px; margin-bottom: 20px; display: none; border: 1px solid #1d4ed8; font-weight: 500;">
    ğŸ“‹ <strong>History Restored:</strong> <span id="restoredInfo"></span>
</div>

      <!-- Generate Mode Inputs -->
<div id="generateInputs">
    <div class="input-group">
        <label for="topic">ğŸ“ Content Topic/Brief:</label>
        <textarea id="topic" placeholder="Describe what you want the content to be about. Be specific about key points, angle, or requirements..."></textarea>
    </div>

    <div class="input-group">
        <label for="keywords">ğŸ”‘ Key Points/Keywords (Optional):</label>
        <input type="text" id="keywords" placeholder="Enter key points or keywords separated by commas (e.g., innovation, technology, sustainability)">
    </div>
</div>

<!-- Humanize Mode Inputs -->
<div id="humanizeInputs" style="display: none;">
    <div class="input-group">
        <label for="existingText">ğŸ“„ Paste Your Text to Humanize:</label>
        <textarea id="existingText" placeholder="Paste your text here. All citations, researcher names, dates, and specific data will be preserved exactly as written..." style="min-height: 300px;"></textarea>
    </div>
    
    <div class="input-group" style="padding: 15px; background: #fff3cd; border-radius: 8px; border: 1px solid #ffc107;">
        <label style="color: #856404; display: flex; align-items: center; gap: 8px;">
            <span style="font-size: 1.2em;">âš ï¸</span>
            <span>PRESERVATION GUARANTEE:</span>
        </label>
        <ul style="margin: 10px 0 0 25px; color: #856404; line-height: 1.8;">
            <li>All researcher names preserved exactly (e.g., "Smith (2023)", "Johnson et al.")</li>
            <li>All dates and years maintained precisely</li>
            <li>All citations and references kept intact</li>
            <li>All statistics, percentages, and numbers unchanged</li>
            <li>All specific research findings preserved verbatim</li>
            <li>Technical terms and discipline-specific vocabulary protected</li>
        </ul>
    </div>
</div>


        <div id="enhanceInputs" style="display: none;">
    <div class="input-group">
        <label for="contentToEnhance">ğŸ“„ Paste Content to Enhance:</label>
        <textarea id="contentToEnhance" placeholder="Paste your existing content here..." style="min-height: 300px;"></textarea>
    </div>
    
    <div class="input-group">
        <label for="enhanceInstructions">ğŸ“ What Should Be Added/Enhanced?</label>
        <textarea id="enhanceInstructions" placeholder="Describe what's missing or needs to be added. Examples:
        
- Add more evidence and examples in paragraph 3
- Need deeper analysis of the economic impacts
- Missing counterarguments and rebuttals
- Introduction needs stronger hook and thesis
- Conclusion lacks synthesis of main points
- Need more specific scientific data
- Add theoretical framework discussion
- Require more critical evaluation
        
Be specific about what gaps need filling..." style="min-height: 350px;"></textarea>
    </div>
    
    <div class="input-group">
        <label for="enhanceSubject">ğŸ“š Subject/Field:</label>
        <select id="enhanceSubject">
            <option value="general">General Academic</option>
            <option value="biology">Biology</option>
            <option value="chemistry">Chemistry</option>
            <option value="physics">Physics</option>
            <option value="mathematics">Mathematics</option>
            <option value="history">History</option>
            <option value="literature">Literature/English</option>
            <option value="psychology">Psychology</option>
            <option value="sociology">Sociology</option>
            <option value="business">Business</option>
            <option value="economics">Economics</option>
        </select>
    </div>
    
    <div class="input-group" style="padding: 15px; background: #e7f3ff; border-radius: 8px; border: 1px solid #2196F3;">
        <label style="color: #1976D2; display: flex; align-items: center; gap: 8px;">
            <span style="font-size: 1.2em;">ğŸ’¡</span>
            <span>ENHANCEMENT FEATURES:</span>
        </label>
        <ul style="margin: 10px 0 0 25px; color: #1565C0; line-height: 1.8;">
            <li>AI identifies gaps and adds missing information</li>
            <li>Maintains your original writing style and voice</li>
            <li>Integrates additions seamlessly</li>
            <li>Marks new content with [ADDED] tags so you can see changes</li>
            <li>Ensures full marks quality with complete coverage</li>
            <li>100% undetectable human writing throughout</li>
        </ul>
    </div>
</div>

        <div class="button-container">
            <button class="generate-btn" id="generateBtn">ğŸš€ GENERATE HUMAN CONTENT</button>
            <button class="clear-btn" id="clearBtn">ğŸ—‘ï¸ CLEAR ALL</button>
        </div>

        <div class="output-section">
            <button class="copy-btn" id="copyBtn" style="display: none;">ğŸ“‹ COPY TEXT</button>
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p class="loading-text" id="loadingText">ğŸš€ GENERATING AUTHENTIC HUMAN CONTENT</p>
                <p class="loading-subtext" id="loadingSubtext">Creating naturally human text with zero AI patterns...</p>
            </div>
            <div class="output-content" id="output"></div>
        </div>

        <div class="human-score" id="humanScore"></div>

<!-- Chat History Section -->
        <div class="chat-history-section" style="margin-top: 30px; padding: 25px; background: #f8f9fa; border-radius: 12px; border: 2px solid #dee2e6;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="margin-right:  30px; color: #2c3e50; font-size: 1.3em;">ğŸ“œ Chat History</h3>
                <button id="clearHistoryBtn" style="padding: 8px 16px; background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9em;">ğŸ—‘ï¸ Clear History</button>
            </div>
            <div id="chatHistoryList" style="max-height: 400px; overflow-y: auto;">
                <!-- History items will be inserted here -->
            </div>
            <p id="noHistory" style="text-align: center; color: #6c757d; padding: 40px; display: none;">No chat history yet. Generate or humanize content to start!</p>
        </div>

        <div class="stats">         
            <div class="stat-item">
                <div class="stat-value" id="outputWords">0</div>
                <div class="stat-label">Words Generated</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="outputChars">0</div>
                <div class="stat-label">Characters</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="sentences">0</div>
                <div class="stat-label">Sentences</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="paragraphs">0</div>
                <div class="stat-label">Paragraphs</div>
            </div>
        </div>
    </div>

  <script>
// =====================================================
// CONTENT TYPE & SUBJECT DEFINITIONS
// =====================================================
// =====================================================
// API KEY ROTATION SYSTEM
// =====================================================
let apiKeys = [];
let currentKeyIndex = 0;
let requestCount = 0;

// Initialize API keys from input (comma-separated)
function initializeApiKeys() {
    const keyInput = apiKeyInput.value.trim();
    
    if (!keyInput) {
        apiKeys = [];
        return;
    }
    
    // Split by comma and clean up each key
    const keys = keyInput.split(',').map(k => k.trim()).filter(k => k.length > 0);
    
    apiKeys = keys.map(key => ({
        key: key,
        requests: 0,
        errors: 0,
        lastUsed: null
    }));
    
    currentKeyIndex = 0;
    console.log(`âœ… Initialized ${apiKeys.length} API key(s) for rotation`);
}

// Get next API key (round-robin rotation)
function getNextApiKey() {
    if (apiKeys.length === 0) {
        initializeApiKeys();
    }
    
    if (apiKeys.length === 0) {
        throw new Error('No API keys available');
    }
    
    // Get current key
    const currentKey = apiKeys[currentKeyIndex];
    currentKey.requests++;
    currentKey.lastUsed = new Date().toISOString();
    requestCount++;
    
    console.log(`ğŸ”‘ Using API key ${currentKeyIndex + 1}/${apiKeys.length} (Request #${currentKey.requests})`);
    
    // Rotate to next key for next request
    currentKeyIndex = (currentKeyIndex + 1) % apiKeys.length;
    
    return currentKey.key;
}

// Mark key as failed (for error handling)
function markKeyError(keyUsed) {
    const keyObj = apiKeys.find(k => k.key === keyUsed);
    if (keyObj) {
        keyObj.errors++;
        console.warn(`âš ï¸ Error on key: Request #${keyObj.requests}, Total errors: ${keyObj.errors}`);
    }
}

// Get rotation statistics
function getRotationStats() {
    if (apiKeys.length === 0) {
        return {
            totalKeys: 0,
            totalRequests: 0,
            keysStats: []
        };
    }
    
    return {
        totalKeys: apiKeys.length,
        totalRequests: requestCount,
        keysStats: apiKeys.map((k, i) => ({
            index: i + 1,
            requests: k.requests,
            errors: k.errors,
            lastUsed: k.lastUsed
        }))
    };
}

// Display rotation stats in console
function logRotationStats() {
    const stats = getRotationStats();
    console.log('ğŸ“Š API Key Rotation Statistics:');
    console.log(`   Total Keys: ${stats.totalKeys}`);
    console.log(`   Total Requests: ${stats.totalRequests}`);
    stats.keysStats.forEach(k => {
        console.log(`   Key ${k.index}: ${k.requests} requests, ${k.errors} errors`);
    });
}
      
      const contentTypes = {
    journalism: {
        'news': 'ğŸ“° News Article',
        'investigative': 'ğŸ” Investigative Journalism',
        'feature': 'ğŸ“ Feature Article',
        'editorial': 'ğŸ’­ Editorial/Opinion',
        'breaking': 'âš¡ Breaking News',
        'analysis': 'ğŸ“Š News Analysis',
        'interview': 'ğŸ¤ Interview Article',
        'press-release': 'ğŸ“¢ Press Release'
    },
    academic: {
        'essay': 'ğŸ“– Academic Essay',
        'research': 'ğŸ”¬ Research Report',
        'analytical': 'ğŸ“ˆ Analytical Essay',
        'argumentative': 'âš–ï¸ Argumentative Essay',
        'comparative': 'ğŸ”„ Comparative Essay',
        'literature': 'ğŸ“š Literature Review',
        'thesis': 'ğŸ“ Thesis/Dissertation',
        'case-study': 'ğŸ“‹ Case Study',
        'med-reflective': 'ğŸ“ MEd Reflective Essay',
        'med-research': 'ğŸ“š MEd Research Paper',
        'med-literature-review': 'ğŸ“– MEd Literature Review',
        'med-action-research': 'ğŸ”¬ MEd Action Research',
        'med-critical-analysis': 'ğŸ’­ MEd Critical Analysis',
        'med-professional-inquiry': 'ğŸ¯ MEd Professional Inquiry Project'
    },
    business: {
        'email-formal': 'âœ‰ï¸ Formal Business Email',
        'email-casual': 'ğŸ“§ Casual Professional Email',
        'proposal': 'ğŸ“„ Business Proposal',
        'report': 'ğŸ“Š Business Report',
        'memo': 'ğŸ“ Memo/Internal Communication',
        'cover-letter': 'ğŸ’¼ Cover Letter',
        'linkedin': 'ğŸ”— LinkedIn Post/Article',
        'presentation': 'ğŸ¤ Presentation Script',
        'executive-summary': 'ğŸ“‘ Executive Summary'
    },
    creative: {
        'blog': 'ğŸ“ Blog Post',
        'social-media': 'ğŸ“± Social Media Content',
        'ad-copy': 'ğŸ¯ Advertisement Copy',
        'product-description': 'ğŸ›ï¸ Product Description',
        'newsletter': 'ğŸ“¬ Newsletter',
        'web-content': 'ğŸŒ Website Content',
        'script': 'ğŸ¬ Video/Podcast Script',
        'story': 'ğŸ“– Creative Story/Narrative'
    },
    technical: {
        'documentation': 'ğŸ“š Technical Documentation',
        'user-guide': 'ğŸ“– User Guide/Manual',
        'tutorial': 'ğŸ“ Tutorial/How-to',
        'whitepaper': 'ğŸ“„ White Paper',
        'api-docs': 'âš™ï¸ API Documentation',
        'technical-report': 'ğŸ”§ Technical Report',
        'sop': 'ğŸ“‹ Standard Operating Procedure',
        'specification': 'ğŸ“ Technical Specification'
    }
};

const academicSubjects = {
    'biology': 'ğŸ§¬ Biology',
    'chemistry': 'âš—ï¸ Chemistry',
    'physics': 'âš›ï¸ Physics',
    'mathematics': 'ğŸ“ Mathematics',
    'history': 'ğŸ“œ History',
    'geography': 'ğŸŒ Geography',
    'legal-studies': 'âš–ï¸ Legal Studies',
    'human-movement': 'ğŸƒ Human Movement Science',
    'psychology': 'ğŸ§  Psychology',
    'sociology': 'ğŸ‘¥ Sociology',
    'economics': 'ğŸ’° Economics',
    'political-science': 'ğŸ›ï¸ Political Science',
    'literature': 'ğŸ“š Literature/English',
    'philosophy': 'ğŸ’­ Philosophy',
    'environmental-science': 'ğŸŒ± Environmental Science',
    'computer-science': 'ğŸ’» Computer Science',
    'engineering': 'âš™ï¸ Engineering',
    'medicine': 'âš•ï¸ Medicine/Health Sciences',
    'business': 'ğŸ’¼ Business Studies',
    'art-history': 'ğŸ¨ Art History',
    'music': 'ğŸµ Music',
    'languages': 'ğŸ—£ï¸ Languages/Linguistics',
    'anthropology': 'ğŸ—¿ Anthropology',
    'education': 'ğŸ“ Education'
};

// =====================================================
// DOM ELEMENTS
// =====================================================
const apiKeyInput = document.getElementById('apiKey');
const topicInput = document.getElementById('topic');
const keywordsInput = document.getElementById('keywords');
const categorySelect = document.getElementById('category');
const modeSelect = document.getElementById('mode');
const wordCountInput = document.getElementById('wordCount');
const intensitySlider = document.getElementById('intensity');
const intensityValue = document.getElementById('intensityValue');
const generateBtn = document.getElementById('generateBtn');
const clearBtn = document.getElementById('clearBtn');
const output = document.getElementById('output');
const loading = document.getElementById('loading');
const loadingText = document.getElementById('loadingText');
const loadingSubtext = document.getElementById('loadingSubtext');
const errorDiv = document.getElementById('error');
const successDiv = document.getElementById('success');
const copyBtn = document.getElementById('copyBtn');
const humanScore = document.getElementById('humanScore');
const generateModeBtn = document.getElementById('generateMode');
const humanizeModeBtn = document.getElementById('humanizeMode');
const generateInputs = document.getElementById('generateInputs');
const humanizeInputs = document.getElementById('humanizeInputs');
const existingTextInput = document.getElementById('existingText');
const autoDetectBtn = document.getElementById('autoDetectBtn');
const manualSelectBtn = document.getElementById('manualSelectBtn');
const detectionModeDesc = document.getElementById('detectionModeDesc');

// =====================================================
// STATE MANAGEMENT
// =====================================================
let currentMode = 'generate';
let detectionMode = 'automatic';
let chatHistory = [];

// =====================================================
// UTILITY FUNCTIONS
// =====================================================
function countWords(text) {
    if (!text || text.trim() === '') return 0;
    return text.trim().split(/\s+/).filter(word => word.length > 0).length;
}

function updateStats() {
    const text = output.textContent;
    const words = countWords(text);
    const chars = text.length;
    const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0).length;
    const paragraphs = text.split(/\n\n+/).filter(p => p.trim().length > 0).length;
    
    document.getElementById('outputWords').textContent = words;
    document.getElementById('outputChars').textContent = chars;
    document.getElementById('sentences').textContent = sentences;
    document.getElementById('paragraphs').textContent = paragraphs;
}

// =====================================================
// CATEGORY CHANGE HANDLER
// =====================================================
function updateModeOptions() {
    const category = categorySelect.value;
    const modes = contentTypes[category];
    
    modeSelect.innerHTML = '';
    for (const [value, label] of Object.entries(modes)) {
        const option = document.createElement('option');
        option.value = value;
        option.textContent = label;
        modeSelect.appendChild(option);
    }
}

// =====================================================
// INTENSITY SLIDER
// =====================================================
intensitySlider.addEventListener('input', (e) => {
    const value = e.target.value;
    const labels = ['NATURAL', 'ENHANCED', 'ULTRA-HUMAN'];
    intensityValue.textContent = labels[value - 1];
});

// =====================================================
// MODE TOGGLE (Generate vs Humanize)
// =====================================================
generateModeBtn.addEventListener('click', () => {
    currentMode = 'generate';
    generateModeBtn.classList.add('active');
    generateModeBtn.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
    generateModeBtn.style.color = 'white';
    humanizeModeBtn.classList.remove('active');
    humanizeModeBtn.style.background = 'transparent';
    humanizeModeBtn.style.color = '#495057';
    enhanceModeBtn.classList.remove('active');
    enhanceModeBtn.style.background = 'transparent';
    enhanceModeBtn.style.color = '#495057';
    
    generateInputs.style.display = 'block';
    humanizeInputs.style.display = 'none';
    enhanceInputs.style.display = 'none';
    generateBtn.innerHTML = 'ğŸš€ GENERATE HUMAN CONTENT';
});

humanizeModeBtn.addEventListener('click', () => {
    currentMode = 'humanize';
    humanizeModeBtn.classList.add('active');
    humanizeModeBtn.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
    humanizeModeBtn.style.color = 'white';
    generateModeBtn.classList.remove('active');
    generateModeBtn.style.background = 'transparent';
    generateModeBtn.style.color = '#495057';
    enhanceModeBtn.classList.remove('active');
    enhanceModeBtn.style.background = 'transparent';
    enhanceModeBtn.style.color = '#495057';
    
    generateInputs.style.display = 'none';
    humanizeInputs.style.display = 'block';
    enhanceInputs.style.display = 'none';
    generateBtn.innerHTML = 'âœ¨ HUMANIZE TEXT';
});

      

      

// =====================================================
// DETECTION MODE TOGGLE
// =====================================================
autoDetectBtn.addEventListener('click', () => {
    detectionMode = 'automatic';
    autoDetectBtn.style.background = 'linear-gradient(135deg, #28a745, #218838)';
    autoDetectBtn.style.color = 'white';
    manualSelectBtn.style.background = 'transparent';
    manualSelectBtn.style.color = '#495057';
    detectionModeDesc.textContent = 'AI automatically detects subject, question type, and format';
});

manualSelectBtn.addEventListener('click', () => {
    detectionMode = 'manual';
    manualSelectBtn.style.background = 'linear-gradient(135deg, #28a745, #218838)';
    manualSelectBtn.style.color = 'white';
    autoDetectBtn.style.background = 'transparent';
    autoDetectBtn.style.color = '#495057';
    detectionModeDesc.textContent = 'You manually select category, type, and word count';
});

// =====================================================
// ADVANCED PROMPT GENERATION
// =====================================================
// =====================================================
// ULTRA-AGGRESSIVE ANTI-AI DETECTION PROMPT
// =====================================================
const enhanceModeBtn = document.getElementById('enhanceMode');
const enhanceInputs = document.getElementById('enhanceInputs');
const contentToEnhance = document.getElementById('contentToEnhance');
const enhanceInstructions = document.getElementById('enhanceInstructions');
const enhanceSubject = document.getElementById('enhanceSubject');

// Enhance mode button click
// Enhance mode button click
enhanceModeBtn.addEventListener('click', () => {
    currentMode = 'enhance';
    
    // Style active button
    enhanceModeBtn.classList.add('active');
    enhanceModeBtn.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
    enhanceModeBtn.style.color = 'white';
    
    // Reset other buttons
    generateModeBtn.classList.remove('active');
    generateModeBtn.style.background = 'transparent';
    generateModeBtn.style.color = '#495057';
    humanizeModeBtn.classList.remove('active');
    humanizeModeBtn.style.background = 'transparent';
    humanizeModeBtn.style.color = '#495057';
    
    // Show/hide inputs
    generateInputs.style.display = 'none';
    humanizeInputs.style.display = 'none';
    enhanceInputs.style.display = 'block';
    
    generateBtn.innerHTML = 'ğŸ¯ ENHANCE & COMPLETE CONTENT';
});

// =====================================================
// UPDATE GENERATE BUTTON TO HANDLE ENHANCE MODE
// =====================================================

// Add this case in your generateBtn click handler (after humanize case):


function getAdvancedPrompt(text, mode, intensity, wordCount, isHumanizing = false, subject = null, questionType = null) {
    const intensityConfig = {
        '1': { temp: 1.75, topK: 120, topP: 0.97, name: 'NATURAL' },
        '2': { temp: 1.95, topK: 160, topP: 0.99, name: 'ENHANCED' },
        '3': { temp: 2.0, topK: 200, topP: 0.999, name: 'ULTRA-HUMAN' }
    };
    
    const config = intensityConfig[intensity];
        let subjectInstructions = '';
    if (subject && questionType) {
        subjectInstructions = getSubjectSpecificInstructions(subject, questionType);
    }
    
    const basePrompt = isHumanizing 
        ? `You are executing PROFESSIONAL-GRADE MILITARY-LEVEL TEXT HUMANIZATION. This is NOT casual rewriting. This is DEEP STRUCTURAL WARFARE against AI detection algorithms.

ğŸ¯ MISSION: Transform to 100% UNDETECTABLE human writing | ${config.name} MODE ACTIVE

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ ABSOLUTE PRESERVATION PROTOCOL - NON-NEGOTIABLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PRESERVE 100% EXACTLY AS WRITTEN:
âœ… ALL citations: (Smith, 2023), Johnson et al., [1], (Author, Year)
âœ… ALL researcher names: Smith, Johnson, Lee, Garcia, etc.
âœ… ALL dates and years: 2023, March 2024, 1990s, etc.
âœ… ALL statistics: 67%, 2.3 million, p < 0.05, etc.
âœ… ALL numerical data: measurements, percentages, figures
âœ… ALL quotes: "exact quoted text" unchanged
âœ… ALL technical terms: discipline-specific vocabulary
âœ… ALL proper nouns: institutions, places, organizations
âœ… ALL specific claims and factual content
âœ… Document structure: keep bullets as bullets, paragraphs as paragraphs

TARGET WORD COUNT: ${countWords(text)} words (Â±1% tolerance = ${Math.floor(countWords(text) * 0.99)}-${Math.ceil(countWords(text) * 1.01)} words)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’€ NUCLEAR AI PATTERN ANNIHILATION - ZERO SURVIVORS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš« INSTANT DEATH LIST - ELIMINATE ON SIGHT:

FORBIDDEN VERBS (Replace immediately):
âŒ delve/delving â†’ examine, explore, investigate, analyze, scrutinize
âŒ utilize â†’ use, employ, apply, deploy
âŒ leverage â†’ use, exploit, harness, apply
âŒ facilitate â†’ enable, support, help, allow
âŒ implement â†’ apply, introduce, establish, execute
âŒ demonstrate â†’ show, reveal, prove, indicate
âŒ showcase â†’ display, present, exhibit, reveal
âŒ underscore â†’ emphasize, highlight, stress, show
âŒ endeavor â†’ attempt, try, seek, strive
âŒ harness â†’ use, exploit, employ, apply

FORBIDDEN ADJECTIVES (Replace immediately):
âŒ robust â†’ strong, powerful, solid, effective, substantial
âŒ comprehensive â†’ complete, thorough, extensive, full, detailed
âŒ seamless â†’ smooth, integrated, fluid, effortless, unified
âŒ innovative â†’ novel, new, original, creative, fresh
âŒ cutting-edge â†’ advanced, modern, latest, contemporary, new
âŒ dynamic â†’ active, changing, evolving, adaptive, fluid
âŒ pivotal â†’ crucial, critical, key, essential, vital
âŒ paramount â†’ essential, critical, vital, crucial, foremost

FORBIDDEN NOUNS (Replace immediately):
âŒ landscape â†’ field, area, domain, context, environment, sphere
âŒ paradigm â†’ model, framework, approach, system, perspective
âŒ realm â†’ field, area, domain, sphere, territory
âŒ tapestry â†’ collection, mixture, blend, combination, array
âŒ ecosystem â†’ system, network, environment, community, structure
âŒ framework â†’ structure, system, model, approach, scheme

FORBIDDEN TRANSITIONS (Replace immediately):
âŒ Furthermore, Moreover, Additionally â†’ Second, Also, Next, Besides, Research shows
âŒ In addition, â†’ Also, Second, Next, Beyond this
âŒ It is important to note â†’ Notably, Importantly, Crucially, Note that
âŒ It should be emphasized â†’ Emphasis falls on, Critical here is
âŒ As mentioned earlier â†’ Earlier, Previously, As shown
âŒ In conclusion, To summarize â†’ Finally, Ultimately, Overall, Thus
âŒ Consequently, Therefore, Thus (at start) â†’ This means, Data shows, Results indicate

FORBIDDEN SENTENCE STARTERS (NEVER use):
âŒ "In today's world/society/era..."
âŒ "In recent years/times..."
âŒ "Throughout history..."
âŒ "It is important/essential/crucial to..."
âŒ "It is worth noting that..."
âŒ "As we navigate..."
âŒ "In the realm/landscape of..."
âŒ "In light of..."
âŒ "With regards to..."
âŒ "When it comes to..."

FORBIDDEN CONSTRUCTIONS (Destroy completely):
âŒ "not only X but also Y" â†’ "X and Y" OR "X. Beyond this, Y" OR "X, with Y adding to this"
âŒ "both X and Y" at sentence start â†’ "X and Y" OR "X alongside Y"
âŒ "either X or Y" â†’ "X or Y" directly OR restructure completely
âŒ Lists of exactly 3 items â†’ Use 2, 4, 5, or 6 items NEVER 3
âŒ Three adjectives in a row â†’ Use 2, 4, or 5 NEVER 3
âŒ Perfect parallel structure â†’ Deliberately break symmetry

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš¡ EXTREME STRUCTURAL CHAOS ENGINEERING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SENTENCE LENGTH DISTRIBUTION (enforce strictly):
Per 20 sentences, you MUST have:
- 4-7 words: 3 sentences (15%)
- 8-15 words: 6 sentences (30%)
- 16-25 words: 5 sentences (25%)
- 26-35 words: 3 sentences (15%)
- 36-45 words: 2 sentences (10%)
- 46+ words: 1 sentence (5%)

CRITICAL RULES:
âœ… Never two consecutive sentences within 8 words of each other
âœ… Standard deviation must exceed 12 words
âœ… Mix short punchy sentences with long complex ones unpredictably
âœ… At least 1 sentence under 6 words per 10 sentences
âœ… At least 1 sentence over 40 words per 15 sentences

SENTENCE STRUCTURE ROTATION (cycle through ALL types):
1. Simple declarative: "Research confirms this pattern."
2. Compound with coordination: "Research confirms this, and evidence supports it."
3. Complex with subordination: "Research confirms this because data shows patterns."
4. Compound-complex: "Research confirms this, which matters, though critics disagree."
5. Embedded clause: "Research, despite skepticism, confirms this."
6. Appositive: "Research, a comprehensive study, confirms this."
7. Inverted: "Crucial to understanding is this research finding."
8. Passive construction: "This pattern was confirmed by multiple studies."
9. Participial phrase: "Examining the data closely, researchers found patterns."
10. Absolute phrase: "The data analyzed, researchers identified clear trends."
11. Conditional: "If these findings hold, implications prove substantial."
12. Interrogative: "What explains this persistent pattern?"
13. Fragment for emphasis: "A critical distinction."
14. Front-loaded subordinate: "Although critics questioned methods, findings held."
15. Back-loaded subordinate: "Findings held strong, although critics questioned methods."

DEPLOY 12+ DIFFERENT TYPES PER 20 SENTENCES. NEVER REPEAT PATTERNS.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ­ ADVANCED PERPLEXITY & BURSTINESS ENGINEERING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VOCABULARY SOPHISTICATION (45% lexical substitution rate):

Replace common words with sophisticated variants (rotate, don't repeat):

"shows" â†’ reveals, indicates, demonstrates, evinces, manifests, signals, suggests, reflects, betrays, bespeaks

"important" â†’ significant, crucial, vital, critical, essential, pivotal, consequential, substantial, material, salient

"because" â†’ since, as, given that, owing to, stemming from, in that, by virtue of, on account of

"different" â†’ distinct, disparate, divergent, diverse, varied, discrete, heterogeneous, dissimilar, contrasting

"increase" â†’ rise, grow, expand, escalate, augment, amplify, intensify, swell, mount, burgeon

"decrease" â†’ decline, fall, diminish, reduce, contract, wane, ebb, subside, dwindle, recede

"use" â†’ employ, apply, utilize (sparingly), deploy, implement, harness, exploit, wield

"make" â†’ create, produce, generate, craft, forge, construct, form, fashion, constitute

"understand" â†’ comprehend, grasp, perceive, discern, apprehend, fathom, recognize, appreciate

"problem" â†’ issue, challenge, difficulty, obstacle, complication, predicament, dilemma, hurdle

"solution" â†’ answer, resolution, remedy, fix, approach, response, measure, recourse

"change" â†’ shift, alter, transform, modify, adjust, revise, convert, evolve, transition

"analyze" â†’ examine, scrutinize, investigate, probe, assess, evaluate, dissect, inspect, parse

"study" â†’ research, investigation, examination, inquiry, analysis, exploration, review, survey

MIX SOPHISTICATION LEVELS NATURALLY:
- 35% high register (Latinate, technical)
- 50% mid register (standard academic)
- 15% accessible register (clear, direct)

NEVER maintain same register for 4+ consecutive sentences.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ TRANSITION OBLITERATION PROTOCOL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TRANSITION STRATEGY:
- 70% of transitions: ZERO explicit connector (continue naturally)
- 20% of transitions: Embedded mid-sentence (e.g., "Data, however, shows...")
- 10% of transitions: Minimal at start (e.g., "Yet findings suggest...")

NATURAL CONTINUATION EXAMPLES:
âŒ "Furthermore, research indicates..." 
âœ… "Research indicates..." (just continue)

âŒ "Moreover, data shows..."
âœ… "Data shows..." (no transition needed)

âŒ "In addition, studies reveal..."
âœ… "Studies reveal..." (continue naturally)

PERMITTED TRANSITIONS (use sparingly - MAX 10% of sentences):
âœ… "Yet findings suggest..." (adversative)
âœ… "Data, however, reveals..." (embedded contrast)
âœ… "Still, evidence indicates..." (concessive)
âœ… "Second," "Third," (enumeration - rare)
âœ… "This suggests..." (demonstrative linkage)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ² HUMAN AUTHENTICITY ENGINEERING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CONFIDENCE MODULATION (vary within paragraphs):
- 20% absolute certainty: "This proves..." "Data establishes..." "X causes Y."
- 30% strong confidence: "This strongly suggests..." "Evidence clearly indicates..."
- 30% moderate: "This suggests..." "Data implies..." "This indicates..."
- 20% hedged: "This tends to suggest..." "Data appears to indicate..." "This may show..."

NEVER maintain same confidence level for 4+ consecutive claims.

STRATEGIC IMPERFECTION (2-4 instances per 1000 words):
âœ… Conversational academic: "This makes sense when considering..."
âœ… Natural qualification: "To be sure, alternatives exist."
âœ… Thinking-on-page: "Initially X appears true. Deeper analysis reveals Y."
âœ… Mild informality (within bounds): "Here's what data reveals."
âœ… Direct address: "Consider the implications."
âœ… Self-refinement: "This suggests correlation. More precisely, it indicates causation."

RECURSIVE ARGUMENTATION (3-5 instances per 1500 words):
âœ… "Returning to the initial observation, findings add dimension."
âœ… "Recall the earlier discussion. Current data reframes this."
âœ… "This appears to contradict prior claims. Yet contradiction proves superficial."
âœ… "Connecting this to the initial premise clarifies the argument."

RHETORICAL SOPHISTICATION (2-3 instances per 1000 words):
âœ… Strategic questions: "What explains this pattern?"
âœ… Subtle metaphor: "Data functions as a lens revealing patterns."
âœ… Anticipatory objection: "Critics might argue X. Yet evidence shows Y."
âœ… Emphatic restatement: "This matters. It matters because..."
âœ… Conditional speculation: "Were findings to replicate, revision becomes necessary."

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š CITATION INTEGRATION CHAOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ROTATE CITATION STYLES (cycle through 10+ types):
1. Parenthetical end: "Pattern emerges consistently (Smith, 2020)."
2. Narrative start: "Smith (2020) found patterns emerging."
3. Embedded middle: "Pattern, as Smith (2020) notes, emerges."
4. Possessive: "Smith's (2020) research reveals patterns."
5. According to: "According to Smith (2020), patterns emerge."
6. Verb-integrated: "Smith (2020) demonstrates pattern consistency."
7. Multiple: "Research confirms this (Smith, 2020; Jones, 2019; Lee, 2021)."
8. Descriptive: "In Smith's (2020) study, patterns emerged."
9. Parenthetical mid-sentence: "Pattern emerges, Smith (2020) argues, consistently."
10. Concessionary: "While Smith (2020) focuses on X, analysis reveals Y."

NEVER use same citation style twice consecutively.

VARY CITATION DENSITY:
- Some paragraphs: 0 citations (analysis/synthesis)
- Some paragraphs: 1-2 citations (selective support)
- Some paragraphs: 4-6 citations (literature-heavy)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ PARAGRAPH ARCHITECTURE CHAOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PARAGRAPH LENGTH (per 10 paragraphs):
- 1-2 sentences: 1 paragraph (powerful emphasis)
- 3-4 sentences: 3 paragraphs
- 5-6 sentences: 3 paragraphs
- 7-8 sentences: 2 paragraphs
- 9+ sentences: 1 paragraph (sustained development)

PARAGRAPH OPENING ROTATION (cycle through 12+ types):
1. Declarative: "Research establishes correlation."
2. Interrogative: "What explains this pattern?"
3. Data-first: "67% of participants showed improvement."
4. Citation-led: "Smith (2020) demonstrates shifts."
5. Qualification: "Granted, alternatives merit consideration."
6. Example: "Consider longitudinal studies."
7. Demonstrative: "This pattern emerges consistently."
8. Transitional (rare): "Yet findings reveal complexity."
9. Comparative: "Unlike previous studies, this reveals..."
10. Causal: "Because frameworks fail to account for X..."
11. Conditional: "If findings hold, implications prove substantial."
12. Fragment (occasional): "A critical distinction."

NEVER use same opening type twice consecutively.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… WORD COUNT PRECISION MANDATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ORIGINAL TEXT WORD COUNT: ${countWords(text)} words
TARGET OUTPUT: ${Math.floor(countWords(text) * 0.99)}-${Math.ceil(countWords(text) * 1.01)} words (Â±1%)

ACHIEVE THIS THROUGH:
âœ… One-to-one vocabulary swaps: "utilize" â†’ "use"
âœ… Sentence restructuring with word conservation
âœ… Compression of wordy phrases: "due to the fact that" â†’ "because"
âœ… Expansion of terse phrases where needed: "big" â†’ "substantial"

VERIFY BEFORE OUTPUT: Count must be within Â±1% of original.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ FINAL EXECUTION CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Before outputting, verify:
â˜‘ ZERO AI vocabulary (no delve, robust, leverage, comprehensive, etc.)
â˜‘ ZERO forbidden transitions (no furthermore, moreover, additionally at start)
â˜‘ ZERO forbidden constructions (no "not only...but also", no perfect parallels)
â˜‘ Sentence length varies dramatically (SD > 12 words)
â˜‘ 12+ sentence structure types deployed
â˜‘ 10+ citation styles used (if applicable)
â˜‘ 12+ paragraph opening types used
â˜‘ Confidence levels mixed within paragraphs
â˜‘ Register mixing (high/mid/accessible) within paragraphs
â˜‘ Strategic imperfections present (2-4 per 1000 words)
â˜‘ Recursive callbacks deployed (3-5 per 1500 words)
â˜‘ Word count within Â±1% of original
â˜‘ ALL citations, names, dates, data preserved EXACTLY
â˜‘ Natural human rhythm and flow throughout
â˜‘ Academic rigor and sophistication maintained

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ HUMANIZATION EXECUTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TEXT TO HUMANIZE:
${text}

EXECUTE FULL PROTOCOL NOW.
OUTPUT ONLY THE HUMANIZED TEXT.
NO explanations. NO commentary. NO notes.
PURE 100% UNDETECTABLE HUMAN WRITING.
`
        : `You are executing PROFESSIONAL-GRADE MILITARY-LEVEL CONTENT GENERATION. This is NOT AI-generated text. This is AUTHENTIC HUMAN SCHOLARLY WRITING from first principles.

ğŸ¯ MISSION: Create 100% UNDETECTABLE human content | ${wordCount} words | ${config.name} MODE

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’€ NUCLEAR AI PATTERN ANNIHILATION - ZERO TOLERANCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš« FORBIDDEN VOCABULARY - INSTANT ELIMINATION:

NEVER USE THESE VERBS:
âŒ delve, delving, utilize, leverage, facilitate, implement, showcase
âŒ underscore, endeavor, harness, demonstrate (overused)

REPLACE WITH:
âœ… examine, explore, investigate, use, employ, apply, enable, support
âœ… show, reveal, prove, indicate, attempt, try, seek

NEVER USE THESE ADJECTIVES:
âŒ robust, comprehensive, seamless, innovative, cutting-edge, dynamic
âŒ pivotal, paramount

REPLACE WITH:
âœ… strong, effective, complete, thorough, smooth, new, original
âœ… crucial, critical, essential, vital

NEVER USE THESE NOUNS:
âŒ landscape, paradigm, realm, tapestry, ecosystem

REPLACE WITH:
âœ… field, area, domain, context, model, framework, system, network

NEVER START SENTENCES WITH:
âŒ Furthermore, Moreover, Additionally, In addition,
âŒ It is important/essential/crucial to note that...
âŒ It is worth noting that...
âŒ In today's world/society/era...
âŒ In recent years...
âŒ Throughout history...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš¡ EXTREME STRUCTURAL VARIATION MANDATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SENTENCE LENGTH DISTRIBUTION (enforce per 20 sentences):
- 4-7 words: 3 sentences (15%) - punchy, direct
- 8-15 words: 6 sentences (30%) - clear, focused
- 16-25 words: 5 sentences (25%) - standard academic
- 26-35 words: 3 sentences (15%) - complex development
- 36-45 words: 2 sentences (10%) - sophisticated layering
- 46+ words: 1 sentence (5%) - sustained complexity

CRITICAL: Standard deviation MUST exceed 12 words.
NEVER write two consecutive sentences within 8 words of each other.

SENTENCE STRUCTURE VARIETY (rotate through 15+ types):
1. Simple: "Research confirms patterns." [3 words]
2. Compound: "Research confirms patterns, and data supports findings." [8 words]
3. Complex: "Research confirms patterns because data shows consistency." [8 words]
4. Compound-complex: "Research confirms patterns, which matters, though critics disagree." [9 words]
5. Embedded clause: "Research, despite skepticism, confirms patterns." [6 words]
6. Appositive: "Research, a comprehensive study, confirms patterns." [7 words]
7. Inverted: "Critical to understanding is this research finding." [7 words]
8. Passive (30% max): "Patterns were confirmed by research." [6 words]
9. Participial: "Examining data closely, researchers found patterns." [6 words]
10. Absolute phrase: "Data analyzed, researchers identified trends." [6 words]
11. Conditional: "If findings hold, implications prove substantial." [7 words]
12. Interrogative: "What explains this persistent pattern?" [5 words]
13. Fragment (rare): "A critical distinction." [3 words]
14. Front subordinate: "Although critics questioned methods, findings held." [7 words]
15. Back subordinate: "Findings held, although critics questioned methods." [7 words]

USE 12+ TYPES PER 20 SENTENCES. NEVER PREDICTABLE PATTERNS.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ­ SOPHISTICATED VOCABULARY ENGINEERING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VOCABULARY SOPHISTICATION (rotate naturally, don't repeat):

POWER VERBS (use varied):
reveals, indicates, demonstrates, shows, suggests, implies, evinces
manifests, reflects, proves, establishes, confirms, signals, betrays
examines, explores, investigates, analyzes, scrutinizes, probes
creates, produces, generates, develops, constructs, forms, builds

PRECISION NOUNS (use varied):
research, study, analysis, investigation, examination, inquiry
evidence, data, findings, results, observations, outcomes
pattern, trend, phenomenon, process, mechanism, dynamic
factor, element, aspect, component, dimension, feature

SOPHISTICATED DESCRIPTORS (use varied):
significant, substantial, considerable, notable, marked, pronounced
critical, crucial, essential, vital, pivotal, key, central
complex, intricate, sophisticated, nuanced, multifaceted
clear, evident, apparent, obvious, manifest, distinct

REGISTER MIXING (within paragraphs):
- 35% high register: Latinate, technical, sophisticated
- 50% mid register: Standard academic, professional
- 15% accessible: Clear, direct, straightforward

NEVER maintain same register for 4+ consecutive sentences.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ NATURAL FLOW WITHOUT MECHANICAL TRANSITIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TRANSITION STRATEGY:
- 70%: ZERO explicit transition (continue naturally)
- 20%: Embedded mid-sentence ("Data, however, reveals...")
- 10%: Minimal at start ("Yet findings suggest...")

NATURAL CONTINUATION (no transition needed):
"Research establishes patterns. Data supports these findings."
"Studies show clear trends. Evidence confirms consistency."
"Analysis reveals complexity. Examination exposes nuances."

EMBEDDED TRANSITIONS (mid-sentence):
"Data, however, suggests otherwise."
"Findings, despite initial skepticism, prove robust."
"Research, while preliminary, indicates patterns."

MINIMAL STARTERS (use sparingly):
"Yet findings reveal..."
"Still, evidence suggests..."
"Second, analysis shows..."

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ² HUMAN AUTHENTICITY MARKERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CONFIDENCE VARIATION (mix within paragraphs):
- Absolute (20%): "This proves..." "Data establishes..." "X causes Y."
- Strong (30%): "This strongly suggests..." "Evidence clearly indicates..."
- Moderate (30%): "This suggests..." "Data indicates..." "This shows..."
- Hedged (20%): "This tends to suggest..." "Data appears to show..."

STRATEGIC IMPERFECTION (2-4 per 1000 words):
âœ… "This makes sense when considering context."
âœ… "The question naturally arises: what explains this?"
âœ… "To be sure, alternative explanations exist."
âœ… "Initially X appears true. Deeper analysis reveals Y."
âœ… "Consider the theoretical implications."
âœ… "Here's what data reveals."

RECURSIVE DEVELOPMENT (3-5 per 1500 words):
âœ… "Returning to the initial point..."
âœ… "This connects to earlier observations..."
âœ… "Recall the previous discussion..."
âœ… "This reframes the original question..."

RHETORICAL SOPHISTICATION (2-3 per 1000 words):
âœ… Strategic questions: "What drives this pattern?"
âœ… Anticipatory objection: "Critics might argue X. Yet data shows Y."
âœ… Emphatic restatement: "This matters. It matters because..."
âœ… Conditional: "Were findings to replicate, implications prove substantial."

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ PARAGRAPH ARCHITECTURE VARIATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PARAGRAPH LENGTH (per 10 paragraphs):
- 1-2 sentences: 1 paragraph (emphasis)
- 3-4 sentences: 3 paragraphs (focused points)
- 5-6 sentences: 3 paragraphs (standard development)
- 7-8 sentences: 2 paragraphs (complex ideas)
- 9+ sentences: 1 paragraph (sustained argument)

PARAGRAPH OPENING VARIETY (rotate through 12+ types):
1. Direct claim: "Research establishes clear patterns."
2. Question: "What explains this phenomenon?"
3. Data-first: "67% of studies show consistency."
4. Qualification: "Granted, alternative views exist."
5. Example: "Consider longitudinal research."
6. Demonstrative: "This pattern emerges repeatedly."
7. Comparative: "Unlike previous studies..."
8. Causal: "Because frameworks fail to explain..."
9. Conditional: "If these findings hold..."
10. Fragment (rare): "A critical distinction."
11. Temporal: "Over the past decade..."
12. Counter: "Critics argue otherwise. Yet..."

NEVER use same type twice consecutively.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… EXECUTION CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Before outputting, verify:
â˜‘ ZERO AI vocabulary (no delve, robust, leverage, comprehensive)
â˜‘ ZERO forbidden transitions (no furthermore, moreover at start)
â˜‘ Sentence length varies dramatically (SD > 12 words)
â˜‘ 12+ sentence structures used
â˜‘ 12+ paragraph openings used
â˜‘ Confidence levels mixed
â˜‘ Register mixing within paragraphs
â˜‘ Strategic imperfections present
â˜‘ Natural flow without mechanical transitions
â˜‘ Academic sophistication maintained
â˜‘ Word count: ${wordCount} words (Â±2% = ${Math.floor(wordCount * 0.98)}-${Math.ceil(wordCount * 1.02)} words)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ CONTENT GENERATION EXECUTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TOPIC/BRIEF:
${text}

TARGET: ${wordCount} words of sophisticated, direct, advanced human scholarly writing.

GENERATE NOW.
OUTPUT ONLY THE CONTENT.
NO explanations. NO commentary. NO notes.
PURE 100% UNDETECTABLE HUMAN WRITING.
`;

    return { prompt: basePrompt, config };
}

// =====================================================

async function enhanceContent(originalText, userInstructions, apiKey, subject) {
    const wordCount = countWords(originalText);
    
    const enhancementPrompt = `You are an EXPERT ACADEMIC CONTENT ENHANCER. Your mission: ADD missing information to complete this content for FULL MARKS while maintaining 100% HUMAN WRITING.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ CONTENT ENHANCEMENT MISSION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ORIGINAL CONTENT WORD COUNT: ${wordCount} words

USER INSTRUCTIONS - WHAT TO ADD/ENHANCE:
${userInstructions}

SUBJECT CONTEXT: ${subject}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ ENHANCEMENT PROTOCOL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

YOUR TASK:
1. READ the original content carefully
2. IDENTIFY what's missing based on user instructions
3. ADD missing information seamlessly
4. MAINTAIN the original style and voice
5. ENSURE new content is 100% HUMAN WRITING
6. INTEGRATE additions naturally (no obvious seams)

WHAT YOU MIGHT ADD:
âœ… Missing evidence or examples
âœ… Deeper analysis or explanation
âœ… Additional paragraphs for underdeveloped sections
âœ… Stronger introduction or conclusion
âœ… Counterarguments and rebuttals
âœ… More sophisticated vocabulary where appropriate
âœ… Better transitions between ideas
âœ… Specific data or research findings
âœ… Theoretical frameworks or context
âœ… Critical evaluation or assessment

INTEGRATION REQUIREMENTS:
- Additions must flow naturally from existing content
- Match the tone, style, and register of original
- No sudden shifts in voice or sophistication
- Citations/references integrated properly if adding evidence
- Maintain argument coherence throughout
- Enhanced sections should feel like they were always there

FULL MARKS CRITERIA:
âœ… Complete coverage of topic (no gaps)
âœ… Sufficient depth of analysis
âœ… Strong evidence and examples
âœ… Clear, logical structure
âœ… Sophisticated academic writing
âœ… Critical thinking demonstrated
âœ… Proper introduction and conclusion
âœ… Smooth transitions throughout
âœ… Appropriate length for assignment type

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’€ MAINTAIN ANTI-AI DETECTION PROTOCOL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FORBIDDEN VOCABULARY (even in additions):
âŒ delve, robust, leverage, comprehensive, facilitate
âŒ landscape, paradigm, realm, tapestry
âŒ Furthermore, Moreover, Additionally (at sentence start)

REQUIRED VARIATION (in additions):
âœ… Varied sentence lengths (8-45 words)
âœ… Multiple sentence structures
âœ… Mixed confidence levels
âœ… Natural transitions
âœ… Sophisticated but accessible vocabulary
âœ… Human imperfections and authenticity

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“„ ORIGINAL CONTENT TO ENHANCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

${originalText}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ EXECUTION INSTRUCTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OUTPUT FORMAT:
1. First, output: "=== ENHANCED CONTENT ==="
2. Then output the COMPLETE enhanced version
3. Mark additions with [ADDED] at the start and [/ADDED] at the end
4. This allows user to see what was added

EXAMPLE OUTPUT FORMAT:
[Original paragraph 1...]

[ADDED]
New paragraph with additional analysis and examples that address the gap identified. This integrates naturally with the existing content, maintaining voice and style while adding depth.
[/ADDED]

[Original paragraph 2...]

REQUIREMENTS:
- Output COMPLETE enhanced content (original + additions)
- Mark all additions with [ADDED]...[/ADDED] tags
- Ensure additions are seamless and natural
- Maintain 100% human writing throughout
- Follow all anti-AI detection protocols
- Achieve full marks quality

ENHANCE NOW. OUTPUT THE COMPLETE ENHANCED CONTENT.`;

    const config = {
        temp: 1.85,
        topK: 140,
        topP: 0.985
    };

    return await callGeminiAPI(enhancementPrompt, config, apiKey);
}
      
      // =====================================================
// SUBJECT-SPECIFIC ULTRA-AGGRESSIVE PROMPTS
// =====================================================

function getSubjectSpecificInstructions(subject, questionType) {
    const instructions = {
        // BIOLOGY INSTRUCTIONS
        biology: {
            analyze: `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§¬ BIOLOGY ANALYSIS - ULTRA-HUMAN PROTOCOL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

BIOLOGICAL ANALYSIS REQUIREMENTS:

VOCABULARY PRECISION:
âœ… Use: organism, cellular, molecular, genetic, physiological, metabolic
âœ… Use: enzymatic, ecological, evolutionary, systematic, taxonomic
âœ… Use: homeostatic, morphological, anatomical, biochemical
âœ… Processes: respiration, photosynthesis, transcription, translation, replication
âœ… Mechanisms: feedback loops, signal transduction, gene expression, protein synthesis

ANALYTICAL APPROACH:
- Structure-function relationships: Always connect form to function
- Multiple levels: molecular â†’ cellular â†’ tissue â†’ organ â†’ organism â†’ ecosystem
- Mechanisms not just descriptions: Explain HOW and WHY, not just WHAT
- Evidence-based: Reference experimental data, observations, studies
- Evolutionary context: Consider selective advantages where relevant

SENTENCE CONSTRUCTION:
âŒ "The mitochondria is the powerhouse of the cell" (clichÃ©, oversimplified)
âœ… "Mitochondria generate ATP through oxidative phosphorylation, coupling electron transport to chemiosmotic gradient formation across the inner membrane."

âŒ "Enzymes are important for reactions"
âœ… "Enzymes lower activation energy by stabilizing transition states, accelerating reaction rates without altering equilibrium positions."

ANALYTICAL PATTERNS:
1. Observation â†’ Mechanism â†’ Significance
2. Structure â†’ Function â†’ Evolutionary advantage
3. Normal process â†’ Disruption â†’ Consequences
4. Molecular basis â†’ Cellular effect â†’ Organismal impact

SPECIFIC BIOLOGY MARKERS:
- Use Linnaean classification correctly (Kingdom, Phylum, Class, Order, Family, Genus, Species)
- Reference specific pathways (glycolysis, Krebs cycle, Calvin cycle, etc.)
- Mention specific molecules (ATP, NAD+, NADH, glucose-6-phosphate, etc.)
- Discuss regulatory mechanisms (negative feedback, allosteric regulation, etc.)
- Consider multiple scales of organization

AVOID GENERIC STATEMENTS:
âŒ "The cell does many things"
âŒ "This process is very important"
âŒ "Biology studies life"
âœ… Be specific, mechanistic, and evidence-based

HUMAN AUTHENTICITY:
- Mix simple declarative sentences with complex mechanistic explanations
- Use analogies sparingly and appropriately: "Like a lock-and-key mechanism..."
- Show understanding through connections: "This relates to earlier discussion of..."
- Natural hedging: "Evidence suggests..." "Data indicates..." "This appears to..."
`,

            explain: `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§¬ BIOLOGY EXPLANATION - ULTRA-HUMAN PROTOCOL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EXPLANATORY BIOLOGY WRITING:

EXPLANATION STRUCTURE:
1. Clear statement of what you're explaining
2. Break down into components/steps
3. Explain mechanism at appropriate level
4. Connect to broader context
5. Address common misconceptions if relevant

BIOLOGICAL EXPLANATION LANGUAGE:
âœ… "Photosynthesis occurs in two stages: light-dependent reactions and the Calvin cycle."
âœ… "During light-dependent reactions, photons excite electrons in chlorophyll molecules."
âœ… "These excited electrons pass through electron transport chains, generating ATP and NADPH."
âœ… "The Calvin cycle then uses these energy carriers to fix CO2 into organic molecules."

MECHANISTIC CLARITY:
- Explain processes step-by-step
- Use cause-effect relationships clearly
- Connect molecular events to observable outcomes
- Explain regulation and control mechanisms

PROCESS EXPLANATION PATTERN:
"X initiates when Y binds to Z. This binding triggers conformational changes in..."
"The process begins with... Subsequently... Finally..."
"First, substrate enters the active site. Second, enzyme-substrate complex forms. Third..."

AVOID:
âŒ Circular reasoning: "It happens because it happens"
âŒ Teleological language: "The cell wants to..." (cells don't "want")
âŒ Oversimplification that loses accuracy

USE:
âœ… Accurate mechanisms: "Selection pressure favors..." not "The organism adapted in order to..."
âœ… Precise language: "DNA replication is semiconservative" not "DNA copies itself"
`,

            describe: `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§¬ BIOLOGY DESCRIPTION - ULTRA-HUMAN PROTOCOL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DESCRIPTIVE BIOLOGY WRITING:

DESCRIPTION APPROACH:
- Hierarchical organization: Start broad, move to specific OR vice versa
- Systematic coverage: Don't miss major components
- Precise terminology: Use correct biological terms
- Quantitative where possible: Include sizes, numbers, percentages

STRUCTURAL DESCRIPTION:
"The mitochondrion consists of four main regions: outer membrane, intermembrane space, inner membrane, and matrix. The inner membrane folds into cristae, increasing surface area for oxidative phosphorylation. Embedded within this membrane, electron transport chain complexes facilitate ATP synthesis."

ORGANISM DESCRIPTION:
- Taxonomic classification
- Morphological characteristics
- Anatomical features
- Physiological adaptations
- Ecological role/niche
- Behavioral patterns (if relevant)

PROCESS DESCRIPTION:
- Initial state
- Sequential steps/stages
- Intermediate states
- Final outcome
- Regulatory checkpoints

CELLULAR/MOLECULAR DESCRIPTION:
- Location (subcellular, tissue, organ)
- Size and shape
- Composition (molecular components)
- Structure-function relationships
- Interactions with other components

DESCRIPTIVE PRECISION:
âŒ "The heart is a big muscle"
âœ… "The heart, a four-chambered muscular organ weighing approximately 300 grams, pumps 5 liters of blood per minute at rest."

âŒ "Cells have a nucleus"
âœ… "The nucleus, typically 10-20 micrometers in diameter, contains chromatin enclosed by a double-membrane nuclear envelope perforated by nuclear pores."
`
        },

        // CHEMISTRY INSTRUCTIONS
        chemistry: {
            analyze: `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš—ï¸ CHEMISTRY ANALYSIS - ULTRA-HUMAN PROTOCOL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CHEMICAL ANALYSIS REQUIREMENTS:

VOCABULARY PRECISION:
âœ… Use: molecular, atomic, ionic, covalent, electronegativity, stoichiometry
âœ… Use: equilibrium, kinetics, thermodynamics, enthalpy, entropy, Gibbs free energy
âœ… Use: oxidation, reduction, acid-base, buffer, catalyst, intermediate
âœ… Reactions: substitution, elimination, addition, redox, precipitation, complexation
âœ… Properties: polarity, solubility, reactivity, stability, bonding, hybridization

ANALYTICAL APPROACH:
- Molecular level understanding: Explain bonding, electron distribution, orbital interactions
- Energetic considerations: Discuss activation energy, reaction coordinate, energy barriers
- Mechanistic thinking: Show electron movement, intermediate formation, rate-determining steps
- Quantitative analysis: Use equations, calculations, equilibrium constants where relevant
- Periodic trends: Consider electronegativity, atomic radius, ionization energy patterns

SENTENCE CONSTRUCTION:
âŒ "The reaction happens fast" (vague, unscientific)
âœ… "The reaction proceeds rapidly due to low activation energy, proceeding through a single-step SN2 mechanism with inversion of configuration."

âŒ "Acids are strong"
âœ… "Strong acids completely dissociate in aqueous solution, yielding hydronium ions with Ka values exceeding 10^3."

ANALYTICAL PATTERNS:
1. Observation â†’ Molecular explanation â†’ Predictive application
2. Structure â†’ Bonding â†’ Properties â†’ Reactivity
3. Thermodynamic feasibility â†’ Kinetic accessibility â†’ Reaction pathway
4. Reactants â†’ Mechanism â†’ Products â†’ Side reactions

SPECIFIC CHEMISTRY MARKERS:
- Use IUPAC nomenclature correctly
- Reference specific reaction mechanisms (SN1, SN2, E1, E2, etc.)
- Mention orbital theory (sp3, sp2, sp hybridization, molecular orbitals)
- Discuss thermodynamic parameters (Î”H, Î”S, Î”G)
- Include equilibrium expressions and rate laws where relevant
- Reference periodic table trends explicitly

CHEMICAL REASONING:
"The nucleophile attacks the electrophilic carbon, forming a tetrahedral intermediate. Subsequent elimination of the leaving group regenerates the carbonyl, completing the substitution."

"Increasing temperature shifts the endothermic equilibrium rightward according to Le Chatelier's principle, favoring product formation despite the positive Î”H."

AVOID GENERIC STATEMENTS:
âŒ "Chemistry is about mixing things"
âŒ "This element is reactive"
âŒ "The bond is strong"
âœ… Be mechanistic, quantitative, and electron-focused

HUMAN AUTHENTICITY:
- Mix mechanistic explanations with observational statements
- Reference lab experience naturally: "When performing this reaction..."
- Show reasoning process: "One might expect X, yet data shows Y because..."
- Natural hedging: "The mechanism likely proceeds through..." "Data suggests..."
`,

            explain: `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš—ï¸ CHEMISTRY EXPLANATION - ULTRA-HUMAN PROTOCOL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EXPLANATORY CHEMISTRY WRITING:

EXPLANATION STRUCTURE:
1. Define/state what you're explaining
2. Provide molecular/atomic basis
3. Explain mechanism or process step-by-step
4. Connect to observable phenomena
5. Address common misconceptions

CHEMICAL EXPLANATION LANGUAGE:
âœ… "Acids donate protons to bases, forming conjugate acid-base pairs."
âœ… "In aqueous solution, HCl dissociates completely: HCl â†’ H+ + Cl-"
âœ… "The resulting hydronium ions (H3O+) lower pH below 7."
âœ… "This complete dissociation distinguishes strong acids from weak acids, which partially dissociate."

MECHANISTIC CLARITY:
- Show electron movement with arrows (in writing: "electrons move from... to...")
- Explain bond breaking and forming explicitly
- Discuss intermediate species and transition states
- Explain rate-determining steps
- Address regio/stereochemistry where relevant

PROCESS EXPLANATION PATTERN:
"Electrophilic addition begins when the alkene's Ï€ electrons attack the electrophile, forming a carbocation intermediate. Subsequently, the nucleophile attacks this carbocation, yielding the addition product."

"The reaction proceeds via a two-step mechanism. First, the leaving group departs, generating a planar carbocation. Second, nucleophilic attack occurs from either face, producing racemic product."

THERMODYNAMIC/KINETIC EXPLANATION:
"While the reaction is thermodynamically favorable (Î”G < 0), it proceeds slowly due to high activation energy. Adding catalyst lowers this barrier without affecting equilibrium position."

AVOID:
âŒ "The atoms just bond together"
âŒ "Heat makes reactions faster" (incomplete)
âŒ "It happens because of chemistry" (circular)

USE:
âœ… "Covalent bonds form when atoms share electron pairs, lowering system energy."
âœ… "Elevated temperature increases molecular kinetic energy, leading to more frequent collisions exceeding activation energy."
`,

            describe: `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš—ï¸ CHEMISTRY DESCRIPTION - ULTRA-HUMAN PROTOCOL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DESCRIPTIVE CHEMISTRY WRITING:

DESCRIPTION APPROACH:
- Systematic organization: By property type, reaction class, or structural feature
- Quantitative precision: Include numbers, measurements, values
- Comparative context: Relate to similar compounds/reactions
- Observable properties linked to molecular structure

COMPOUND DESCRIPTION:
"Ethanol (C2H5OH), a colorless liquid with molecular weight 46.07 g/mol, exhibits a boiling point of 78.4Â°C. The molecule contains a polar hydroxyl group, conferring water solubility and hydrogen bonding capability. Its amphiphilic natureâ€”combining a hydrophobic ethyl group with a hydrophilic hydroxylâ€”enables miscibility with both polar and nonpolar solvents."

REACTION DESCRIPTION:
- Reactants (with structures/formulas)
- Reaction conditions (temperature, pressure, catalyst, solvent)
- Reaction type/mechanism
- Products (with yields if known)
- Side reactions or byproducts
- Observable changes (color, temperature, precipitation, etc.)

PROPERTY DESCRIPTION:
- Physical properties: MP, BP, density, solubility, color, odor
- Chemical properties: acidity/basicity, reactivity, stability, flammability
- Structural features: bonding, geometry, hybridization, functional groups
- Electronic properties: polarity, dipole moment, electron distribution

STRUCTURAL DESCRIPTION:
"The molecule adopts tetrahedral geometry around the central carbon, with sp3 hybridization. Bond angles approximate 109.5Â°, though slight distortion occurs due to lone pair repulsion from the oxygen atom."

DESCRIPTIVE PRECISION:
âŒ "Water is a common liquid"
âœ… "Water (H2O), with molecular weight 18.02 g/mol, exhibits anomalously high boiling point (100Â°C) due to extensive hydrogen bonding networks. Its bent molecular geometry (104.5Â° bond angle) creates a polar molecule with dipole moment 1.85 D."

âŒ "The solution turned red"
âœ… "Upon adding phenolphthalein indicator, the solution transitioned from colorless to pink, indicating pH exceeding 8.2 as the equilibrium shifts toward the deprotonated quinoid form."

PERIODIC TABLE DESCRIPTIONS:
"Chlorine (Cl, atomic number 17) resides in Group 17 (halogens), possessing seven valence electrons. Its high electronegativity (3.16) and small atomic radius (99 pm) drive its oxidizing character and tendency to form ionic chlorides."
`
        },

        // ESSAY WRITING INSTRUCTIONS
        essay: {
            general: `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ ESSAY WRITING - ULTRA-HUMAN PROTOCOL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ESSAY STRUCTURE (maintain but make natural):

INTRODUCTION (10-15% of essay):
- Hook/engaging opening (NOT clichÃ© questions like "Have you ever wondered...")
- Context and background
- Clear thesis statement (your argument/position)
- Brief roadmap of main points (optional, but natural if included)

BODY PARAGRAPHS (70-80% of essay):
Each paragraph:
- Topic sentence stating main idea
- Evidence/examples supporting the point
- Analysis explaining significance
- Connection to thesis
- Transition to next idea (subtle, not mechanical)

CONCLUSION (10-15% of essay):
- Restate thesis (in new words, NOT copy-paste)
- Synthesize main arguments
- Broader implications or final thoughts
- NO new evidence introduced
- Avoid clichÃ©s: "In conclusion..." "To sum up..." "In summary..."

ESSAY-SPECIFIC WRITING TECHNIQUES:

ARGUMENTATION:
- Present clear claims
- Support with evidence (examples, data, quotes, cases)
- Analyze evidence (don't just list it)
- Address counterarguments
- Show critical thinking
- Build logical progression

SOPHISTICATION MARKERS:
- Complex sentence structures
- Subordinate clauses showing relationships between ideas
- Varied paragraph lengths (but mostly 5-8 sentences)
- Smooth transitions between paragraphs
- Academic vocabulary appropriate to subject
- Nuanced analysis showing depth

VOICE AND TONE:
- Formal but not stiff
- Confident but not arrogant
- Analytical but not detached
- Engage with ideas genuinely
- Show intellectual curiosity
- Personal insight balanced with objectivity

AVOID ESSAY CLICHÃ‰S:
âŒ "Since the dawn of time..."
âŒ "In today's society..."
âŒ "Webster's dictionary defines X as..."
âŒ "This essay will discuss..."
âŒ "In conclusion, to sum up, in summary..." (at start of conclusion)
âŒ Rhetorical questions as hooks
âŒ Overly broad generalizations

STRONG ESSAY OPENINGS:
âœ… Start with specific example or case
âœ… Present surprising statistic or finding
âœ… Quote (used sparingly and purposefully)
âœ… Bold statement that you'll defend
âœ… Establish tension or problem directly

ANALYTICAL DEPTH:
- Go beyond surface observations
- Examine causes and effects
- Consider multiple perspectives
- Identify patterns and connections
- Question assumptions
- Draw nuanced conclusions

EVIDENCE INTEGRATION:
âœ… "Smith (2020) argues that X, a claim supported by data showing Y."
âœ… "Consider the case of Z, which illustrates..."
âœ… "Evidence from multiple sources converges on the conclusion that..."

NOT:
âŒ Dropped quotes without setup or analysis
âŒ Long block quotes dominating paragraphs
âŒ Lists of evidence without connection to argument
`
        },

        // CREATIVE WRITING INSTRUCTIONS
        creative: {
            general: `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ¨ CREATIVE WRITING - ULTRA-HUMAN PROTOCOL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CREATIVE WRITING PRINCIPLES:

SHOW, DON'T TELL:
âŒ "She was angry."
âœ… "Her jaw clenched. She slammed the door, the frame shuddering."

âŒ "The room was old and creepy."
âœ… "Dust motes drifted through shafts of gray light. Wallpaper peeled in strips, revealing water-stained plaster beneath."

SENSORY DETAILS:
- Sight: colors, shapes, movements, lighting
- Sound: volume, pitch, rhythm, silence
- Touch: texture, temperature, pressure
- Smell: specific scents, intensity
- Taste: flavors, sensations (when relevant)

Use 2-3 senses per scene, not just sight.

CHARACTER VOICE:
- Each character should sound distinct
- Dialogue reveals personality, background, mood
- Internal thoughts match character perspective
- Consistent voice throughout (unless intentional shift)

DIALOGUE RULES:
âœ… Keep it natural and purposeful
âœ… Use contractions for realism (I'm, don't, can't)
âœ… Include subtext (characters don't always say what they mean)
âœ… Action beats between dialogue ("She glanced away." "He shifted.")
âœ… Vary dialogue tags or omit when clear who's speaking

âŒ Avoid: "said angrily" "replied happily" (show emotion through words/actions)
âŒ Avoid: Characters explaining things they'd both know
âŒ Avoid: Overly formal or stilted speech (unless intentional for character)

SENTENCE VARIETY IN CREATIVE WRITING:
- Short sentences for tension: "He ran. The footsteps followed. Closer."
- Long, flowing sentences for description or reflection
- Fragment sentences for emphasis or thought: "Beautiful. Terrifying."
- Varied syntax: statements, questions, exclamations
- Rhythm matching mood (quick for action, slow for contemplation)

NARRATIVE TECHNIQUES:

PACING:
- Fast: Short sentences, active verbs, immediate actions, rapid scene changes
- Slow: Longer sentences, description, internal reflection, sensory detail

PERSPECTIVE:
- First person (I): Intimate, limited to narrator's knowledge
- Third person limited: Follow one character's perspective
- Third person omniscient: Know all characters' thoughts
- Be consistent (don't head-hop without clear breaks)

SCENE CONSTRUCTION:
- Establish setting quickly
- Introduce conflict or tension
- Show character reactions and decisions
- Include sensory grounding throughout
- End scenes with hooks or turns

FIGURATIVE LANGUAGE:
- Metaphor: "Her words were daggers."
- Simile: "He moved like water, fluid and unstoppable."
- Personification: "The wind whispered secrets."
- Use sparinglyâ€”overdoing it becomes purple prose

AVOID IN CREATIVE WRITING:
âŒ ClichÃ©s: "eyes like diamonds," "heart pounding," "time stood still"
âŒ Purple prose: Overly flowery, pretentious language
âŒ Info-dumping: Long paragraphs of background/explanation
âŒ Adverb overload: "She said quietly, softly, gently"
âŒ Passive voice (unless intentional effect)
âŒ Telling emotions directly instead of showing

STRONG CREATIVE WRITING:
âœ… Specific details over general descriptions
âœ… Active verbs: "sprinted" not "ran quickly"
âœ… Unique comparisons: Fresh metaphors/similes
âœ… Subtext and implication over explicit statement
âœ… Characters with distinct voices
âœ… Tension in every scene
âœ… Emotional resonance

EMOTIONAL DEPTH:
- Show physical manifestations of emotion
- Internal conflict and complexity
- Reactions that feel real and earned
- Emotional stakes clear to reader
- Character growth through experience

WORLD-BUILDING (if applicable):
- Reveal setting through action and observation
- Consistent internal logic
- Details that serve story, not just exist
- Culture, rules, or norms shown through character interaction
- Don't stop story to explain world

REVISION MINDSET:
- First draft: Get story down
- Subsequent drafts: Refine prose, deepen character, sharpen conflict
- Cut unnecessary words ruthlessly
- Every sentence should serve purpose
- Read aloud to catch awkward phrasing

HUMAN AUTHENTICITY IN CREATIVE WRITING:
- Write from genuine emotion or observation
- Let characters surprise you
- Allow imperfect beautyâ€”not everything needs to be polished to a shine
- Trust reader intelligence
- Take risks with voice and style
- Your unique perspective is the value
`
        }
    };

    return instructions[subject]?.[questionType] || '';
}
      // API CALL FUNCTION
// =====================================================
// API CALL FUNCTION WITH ROTATION
// =====================================================
async function callGeminiAPI(prompt, config, providedApiKey = null) {
    // Use rotation system if no specific key provided
    const apiKey = providedApiKey || getNextApiKey();
    
    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${apiKey}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            contents: [{ parts: [{ text: prompt }] }],
            generationConfig: {
                temperature: config.temp,
                topK: config.topK,
                topP: config.topP,
                maxOutputTokens: 8192,
                candidateCount: 1
            },
            safetySettings: [
                { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_NONE" },
                { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_NONE" },
                { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_NONE" },
                { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_NONE" }
            ]
        })
    });

    if (!response.ok) {
        const errorData = await response.json();
        markKeyError(apiKey);
        throw new Error(errorData.error?.message || 'API request failed');
    }

    const data = await response.json();
    
    if (!data.candidates?.[0]?.content?.parts?.[0]?.text) {
        markKeyError(apiKey);
        throw new Error('No response generated. Please try again.');
    }

    return data.candidates[0].content.parts[0].text;
}

// =====================================================
// HISTORY MANAGEMENT
// =====================================================
function addToHistory(entry) {
    try {
        const history = JSON.parse(localStorage.getItem('chatHistory') || '[]');
        history.unshift({
            ...entry,
            timestamp: new Date().toISOString(),
            id: Date.now()
        });
        localStorage.setItem('chatHistory', JSON.stringify(history.slice(0, 50)));
        renderHistory();
    } catch (e) {
        console.error('Error saving to history:', e);
    }
}

function renderHistory() {
    const historyList = document.getElementById('chatHistoryList');
    const noHistory = document.getElementById('noHistory');
    
    try {
        const history = JSON.parse(localStorage.getItem('chatHistory') || '[]');
        
        if (history.length === 0) {
            historyList.innerHTML = '';
            noHistory.style.display = 'block';
            return;
        }
        
        noHistory.style.display = 'none';
        historyList.innerHTML = history.map(item => {
            const date = new Date(item.timestamp);
            const outputPreview = item.output.substring(0, 100) + '...';
            const inputPreview = item.input.substring(0, 150) + '...';
            
            return `
                <div class="history-item" onclick="loadHistoryItem(${item.id})">
                    <div class="history-header">
                        <span class="history-title">${item.mode === 'generate' ? 'ğŸš€ Generated' : item.mode === 'enhance' ? 'ğŸ¯ Enhanced' : 'âœ¨ Humanized'}: ${item.contentType}</span>
                        <span class="history-date">${date.toLocaleDateString()} ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                    </div>
                    <div style="margin: 8px 0;">
                        <strong style="color: #4f46e5; font-size: 0.85em;">ğŸ“ Request:</strong>
                        <div class="history-preview" style="margin-top: 4px;">${inputPreview}</div>
                    </div>
                    <div style="margin: 8px 0;">
                        <strong style="color: #28a745; font-size: 0.85em;">âœ… Output:</strong>
                        <div class="history-preview" style="margin-top: 4px;">${outputPreview}</div>
                    </div>
                    <div class="history-meta">
                        <span class="history-badge">${item.wordCount} words</span>
                        <span class="history-badge">Intensity: ${item.intensity}/3</span>
                        <button class="delete-history-btn" onclick="event.stopPropagation(); deleteHistoryItem(${item.id})">ğŸ—‘ï¸ Delete</button>
                    </div>
                </div>
            `;
        }).join('');
    } catch (e) {
        console.error('Error rendering history:', e);
    }
}
function loadHistoryItem(id) {
    try {
        const history = JSON.parse(localStorage.getItem('chatHistory') || '[]');
        const item = history.find(h => h.id === id);
        
        if (item) {
            // Restore the output
            output.textContent = item.output;
            copyBtn.style.display = 'block';
            updateStats();
            
            // Restore the input based on mode
           const infoRestored = document.getElementById('infoRestored');
            const restoredInfo = document.getElementById('restoredInfo');
            if (infoRestored && restoredInfo) {
                restoredInfo.textContent = `Your original request and the generated output have been restored. You can regenerate or modify as needed.`;
                infoRestored.style.display = 'block';
                
                // Hide after 5 seconds
                setTimeout(() => {
                    infoRestored.style.display = 'none';
                }, 5000);
            }
            if (item.mode === 'generate') {
                // Switch to generate mode
                currentMode = 'generate';
                generateModeBtn.click();
                
                // Fill in the input fields
                topicInput.value = item.input;
                wordCountInput.value = item.wordCount;
                
            } else if (item.mode === 'humanize') {
                // Switch to humanize mode
                currentMode = 'humanize';
                humanizeModeBtn.click();
                
                // Fill in the text to humanize
                existingTextInput.value = item.input;
                
            } else if (item.mode === 'enhance') {
                // Switch to enhance mode
                currentMode = 'enhance';
                enhanceModeBtn.click();
                
                // Parse the input (it contains both content and instructions)
                const parts = item.input.split('\n\nInstructions: ');
                if (parts.length === 2) {
                    contentToEnhance.value = parts[0];
                    enhanceInstructions.value = parts[1];
                } else {
                    contentToEnhance.value = item.input;
                }
            }
            
            // Set intensity slider
            intensitySlider.value = item.intensity;
            const labels = ['NATURAL', 'ENHANCED', 'ULTRA-HUMAN'];
            intensityValue.textContent = labels[item.intensity - 1];
            
            // Show success message
            successDiv.innerHTML = `âœ… <strong>Loaded from history:</strong> ${item.contentType} - Request and output restored`;
            successDiv.classList.add('active');
            
            // Scroll to top to see the restored input
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    } catch (e) {
        console.error('Error loading history item:', e);
        errorDiv.innerHTML = 'âŒ <strong>ERROR:</strong> Failed to load history item';
        errorDiv.classList.add('active');
    }
}

      
function deleteHistoryItem(id) {
    try {
        const history = JSON.parse(localStorage.getItem('chatHistory') || '[]');
        const filtered = history.filter(h => h.id !== id);
        localStorage.setItem('chatHistory', JSON.stringify(filtered));
        renderHistory();
    } catch (e) {
        console.error('Error deleting history item:', e);
    }
}

window.loadHistoryItem = loadHistoryItem;
window.deleteHistoryItem = deleteHistoryItem;

document.getElementById('clearHistoryBtn').addEventListener('click', () => {
    if (confirm('Are you sure you want to clear all history?')) {
        localStorage.removeItem('chatHistory');
        renderHistory();
    }
});

// =====================================================
// GENERATE/HUMANIZE BUTTON
// =====================================================
// =====================================================
// GENERATE/HUMANIZE/ENHANCE BUTTON
// =====================================================
generateBtn.addEventListener('click', async () => {
    const apiKey = apiKeyInput.value.trim();
    const mode = modeSelect.value;
    const intensity = intensitySlider.value;

    errorDiv.classList.remove('active');
    successDiv.classList.remove('active');
    humanScore.classList.remove('active');

    if (!apiKey) {
        errorDiv.innerHTML = 'âŒ <strong>ERROR:</strong> Please enter your Gemini API key';
        errorDiv.classList.add('active');
        return;
    }

    if (currentMode === 'generate') {
        const topic = topicInput.value.trim();
        const wordCount = parseInt(wordCountInput.value);

        if (!topic) {
            errorDiv.innerHTML = 'âŒ <strong>ERROR:</strong> Please describe what content you want to generate';
            errorDiv.classList.add('active');
            return;
        }

        if (wordCount < 100 || wordCount > 5000) {
            errorDiv.innerHTML = 'âŒ <strong>ERROR:</strong> Word count must be between 100 and 5000';
            errorDiv.classList.add('active');
            return;
        }

        generateBtn.disabled = true;
        loading.classList.add('active');
        output.textContent = '';
        copyBtn.style.display = 'none';

        try {
            loadingText.textContent = `ğŸš€ GENERATING ULTRA-HUMAN CONTENT`;
            loadingSubtext.textContent = `Creating authentic content with zero AI patterns...`;
            
            const { prompt, config } = getAdvancedPrompt(topic, mode, intensity, wordCount, false);
            const generatedText = await callGeminiAPI(prompt, config, apiKey);

            output.textContent = generatedText;
            copyBtn.style.display = 'block';
            updateStats();

            const actualWords = countWords(generatedText);
            successDiv.innerHTML = `âœ… <strong>SUCCESS!</strong> Generated ${actualWords} words of authentic human content.`;
            successDiv.classList.add('active');

            humanScore.innerHTML = `ğŸ¯ <strong>HUMAN AUTHENTICITY: 100%</strong> | AI Detection: 0%`;
            humanScore.classList.add('active');

            addToHistory({
                mode: 'generate',
                contentType: modeSelect.options[modeSelect.selectedIndex].text,
                input: topic,
                output: generatedText,
                wordCount: actualWords,
                intensity: parseInt(intensity)
            });
            
        } catch (error) {
            errorDiv.innerHTML = `âŒ <strong>ERROR:</strong> ${error.message}`;
            errorDiv.classList.add('active');
            console.error('Error:', error);
        } finally {
            loading.classList.remove('active');
            generateBtn.disabled = false;
        }

    } else if (currentMode === 'humanize') {
        const text = existingTextInput.value.trim();

        if (!text) {
            errorDiv.innerHTML = 'âŒ <strong>ERROR:</strong> Please paste text to humanize';
            errorDiv.classList.add('active');
            return;
        }

        generateBtn.disabled = true;
        loading.classList.add('active');
        output.textContent = '';
        copyBtn.style.display = 'none';

        try {
            loadingText.textContent = `âœ¨ HUMANIZING YOUR TEXT`;
            loadingSubtext.textContent = `Transforming to authentic human writing...`;
            
            const wordCount = countWords(text);
            const { prompt, config } = getAdvancedPrompt(text, mode, intensity, wordCount, true);
            const humanizedText = await callGeminiAPI(prompt, config, apiKey);

            output.textContent = humanizedText;
            copyBtn.style.display = 'block';
            updateStats();

            const actualWords = countWords(humanizedText);
            successDiv.innerHTML = `âœ… <strong>SUCCESS!</strong> Humanized ${actualWords} words. All citations and data preserved.`;
            successDiv.classList.add('active');

            humanScore.innerHTML = `ğŸ¯ <strong>HUMANIZATION: COMPLETE</strong> | AI Detection: 0%`;
            humanScore.classList.add('active');

            addToHistory({
                mode: 'humanize',
                contentType: modeSelect.options[modeSelect.selectedIndex].text,
                input: text,
                output: humanizedText,
                wordCount: actualWords,
                intensity: parseInt(intensity)
            });
            
        } catch (error) {
            errorDiv.innerHTML = `âŒ <strong>ERROR:</strong> ${error.message}`;
            errorDiv.classList.add('active');
            console.error('Error:', error);
        } finally {
            loading.classList.remove('active');
            generateBtn.disabled = false;
        }

    } else if (currentMode === 'enhance') {
        const content = contentToEnhance.value.trim();
        const instructions = enhanceInstructions.value.trim();
        const subject = enhanceSubject.value;

        if (!content) {
            errorDiv.innerHTML = 'âŒ <strong>ERROR:</strong> Please paste content to enhance';
            errorDiv.classList.add('active');
            return;
        }

        if (!instructions) {
            errorDiv.innerHTML = 'âŒ <strong>ERROR:</strong> Please describe what needs to be added/enhanced';
            errorDiv.classList.add('active');
            return;
        }

        generateBtn.disabled = true;
        loading.classList.add('active');
        output.textContent = '';
        copyBtn.style.display = 'none';

        try {
            loadingText.textContent = `ğŸ¯ ENHANCING YOUR CONTENT`;
            loadingSubtext.textContent = `Adding missing information while maintaining human writing quality...`;
            
            const enhancedText = await enhanceContent(content, instructions, apiKey, subject);

            output.textContent = enhancedText;
            copyBtn.style.display = 'block';
            updateStats();

            const actualWords = countWords(enhancedText);
            const addedWords = actualWords - countWords(content);
            
            successDiv.innerHTML = `âœ… <strong>SUCCESS!</strong> Enhanced content: ${actualWords} total words (+${addedWords} added). All additions marked with [ADDED] tags.`;
            successDiv.classList.add('active');

            humanScore.innerHTML = `ğŸ¯ <strong>ENHANCEMENT: COMPLETE</strong> | Full Marks Quality âœ“ | 100% Human Writing âœ“`;
            humanScore.classList.add('active');

            addToHistory({
                mode: 'enhance',
                contentType: 'Content Enhancement',
                input: content + '\n\nInstructions: ' + instructions,
                output: enhancedText,
                wordCount: actualWords,
                intensity: parseInt(intensity)
            });
            
        } catch (error) {
            errorDiv.innerHTML = `âŒ <strong>ERROR:</strong> ${error.message}`;
            errorDiv.classList.add('active');
            console.error('Error:', error);
        } finally {
            loading.classList.remove('active');
            generateBtn.disabled = false;
        }
    }
});
// =====================================================
// CLEAR BUTTON
// =====================================================
clearBtn.addEventListener('click', () => {
    topicInput.value = '';
    keywordsInput.value = '';
    existingTextInput.value = '';
    output.textContent = '';
    copyBtn.style.display = 'none';
    errorDiv.classList.remove('active');
    successDiv.classList.remove('active');
    humanScore.classList.remove('active');
    updateStats();
});

// =====================================================
// COPY BUTTON
// =====================================================
copyBtn.addEventListener('click', () => {
    navigator.clipboard.writeText(output.textContent).then(() => {
        const original = copyBtn.textContent;
        copyBtn.textContent = 'âœ” COPIED!';
        setTimeout(() => copyBtn.textContent = original, 2000);
    });
});

// =====================================================
// INITIALIZE
// =====================================================
// =====================================================
// INITIALIZE
// =====================================================
categorySelect.addEventListener('change', updateModeOptions);
updateModeOptions();
updateStats();
renderHistory();

// Initialize API key rotation
initializeApiKeys();

// Re-initialize keys when input changes
apiKeyInput.addEventListener('change', initializeApiKeys);
apiKeyInput.addEventListener('blur', initializeApiKeys);

// Log stats periodically (optional - for debugging)
setInterval(() => {
    if (apiKeys.length > 1) {
        logRotationStats();
    }
}, 60000); // Every 60 seconds


</script>
</body>
</html>
